{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./content/eventConfig.js","webpack:///./content/events.js","webpack:///./content/content.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isTextInput","events","target","tagName","toUpperCase","mouseenter","condition","evt","dblclick","props","clientX","clientY","detail","click","keydown","keyCode","keypress","keyup","scroll","fn","noParent","parentElement","left","window","pageXOffset","scrollLeft","top","pageYOffset","scrollTop","contextmenu","automEvents","eventConfig","selectorConfig","attrsConfig","id","enabled","include","exclude","classList","type","attrs","eventCb","recording","selectTargetOverlay","regionStart","eventModule","previousTime","updateStateHandler","attrBuilderMap","cssPath","attrConfig","matchValues","matches","length","Array","slice","forEach","css","isUniqueSelector","selectingType","isMouseDown","initAttrs","keys","push","updateState","config","isInRange","evtX","evtY","innerWidth","innerHeight","onSelectingMouseOver","overLay","position","targetBox","size","getSelectingOverlay","getBoundingClientRect","x","getPosition","y","width","height","style","border","Math","min","abs","borderTop","borderLeft","borderRight","borderBottom","borderColor","document","body","display","onSelectingMouseDown","eventMessage","hideSelectingOverlay","getEventTarget","timeDiff","getTimeDiff","getVerifyTargetMessage","sendEventMessage","message","stopPropagation","preventDefault","onSelectingMouseUp","onSelectingClick","el","createElement","background","appendChild","onEvent","console","log","prop","isPropFunc","propName","propValue","undefined","getEventMessage","diff","Date","getTime","includeText","concat","eventTarget","dest","textContent","replace","substring","els","nth","parent","isUnique","currentTarget","currentCssPath","buildCssPath","parentNode","querySelectorAll","indexOf","getCssPath","pathBuilder","attr","attrValue","len","values","includeRegex","excludeRegex","resultMap","RegExp","test","elPosition","scrollX","scrollY","startListening","cb","event","addEventListener","toggleRecording","toStart","setSelectingType","highlightElement","querySelector","setTimeout","updateConfig","JSON","stringify","setUpdateStateHandler","handler","assign","channel","state","actions","start","location","reload","stop","disconnect","selecttarget","highlight","updateconfig","updatestate","screenshot","isPartialScreenshot","onUnLoad","postMessage","stopRecording","handlChannelMessage","eventCallBack","sendMessage","chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","success","response","isRecording","connect","self","notify","sizes","url","href"],"mappings":"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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 290);\n","(function () {\r\n    var isTextInput = function (target) {\r\n        var tagName = target && target.tagName && target.tagName.toUpperCase();\r\n        if (!tagName) {\r\n            return false;\r\n        }\r\n        return tagName === 'TEXTAREA' || tagName === 'INPUT';\r\n    },\r\n        events = {\r\n            mouseenter: {\r\n                condition: function (evt) {\r\n                    return false;\r\n                }\r\n            },\r\n            dblclick: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0);\r\n                }\r\n            },\r\n            click: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0 && evt.target && evt.target.tagName.toUpperCase() !== 'SELECT');\r\n                }\r\n            },\r\n            keydown: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return evt.keyCode === 8 || evt.keyCode === 46 || evt.keyCode === 13;\r\n                }\r\n            },\r\n            keypress: {\r\n                props: ['key', 'keyCode', , 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return !isTextInput(evt.target);\r\n                }\r\n            },\r\n            keyup: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return isTextInput(evt.target) && evt.keyCode !== 13;\r\n                }\r\n            },\r\n            scroll: {\r\n                props: ['detail', {\r\n                    name: 'scroll', fn: function scroll(evt) {\r\n                        var target = evt.target,\r\n                            noParent = !target.parentElement,\r\n                            scrollLeft = !noParent ? target.scrollLeft : window.pageXOffset,\r\n                            scrollTop = !noParent ? target.scrollTop : window.pageYOffset;\r\n\r\n                        return { left: scrollLeft, top: scrollTop };\r\n                    }\r\n                }]\r\n            },\r\n            contextmenu: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            }\r\n            // wheel: {\r\n            //     props: ['deltaX ', 'deltaY', 'deltaZ', 'deltaMode', 'altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n            // mousedown: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mousemove: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mouseup: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n        },\r\n        selectorConfig = {\r\n            attrsConfig: {\r\n                id: {\r\n                    enabled: true,\r\n                    include: null,\r\n                    exclude: null,\r\n                },\r\n                classList: {\r\n                    enabled: true,\r\n                    include: null,\r\n                    exclude: null,\r\n                },\r\n                tagName: {\r\n                    enabled: true,\r\n                    include: null,\r\n                    exclude: null,\r\n                },\r\n                target: {\r\n                    enabled: true,\r\n                    include: null,\r\n                    exclude: null,\r\n                },\r\n                name: {\r\n                    enabled: true,\r\n                    include: null,\r\n                    exclude: null,\r\n                },\r\n                type: {\r\n                    enabled: true,\r\n                    include: null,\r\n                    exclude: null,\r\n                }\r\n            }\r\n        };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.eventConfig = events;\r\n    window.automEvents.selectorConfig = selectorConfig;\r\n})();","(function () {\r\n    var automEvents = window.automEvents,\r\n        events = automEvents.eventConfig,\r\n        attrsConfig = automEvents.selectorConfig.attrsConfig,\r\n        attrs,\r\n        commands = {\r\n            sceenshot: {\r\n                keys: []\r\n            },\r\n            verifytarget: {\r\n                keys: []\r\n            }\r\n        },\r\n        attrBuilderMap = {\r\n            'id': buildIdPath,\r\n            'tagName': buildTagPath,\r\n            'classList': buildClassPath\r\n        },\r\n        eventCb,\r\n        recording,\r\n        selectingType = null,\r\n        isScreenshot,\r\n        selectTargetOverlay,\r\n        regionStart,\r\n        isMouseDown = false,\r\n        eventModule,\r\n        previousTime,\r\n        updateStateHandler;\r\n\r\n    function startListening(cb) {\r\n        eventCb = cb;\r\n        initAttrs();\r\n\r\n        Object.keys(events).forEach(function (event) {\r\n            var eventConfig = events[event];\r\n            window.addEventListener(event, onEvent, true);\r\n        });\r\n\r\n        window.addEventListener('mousemove', onSelectingMouseOver, true);\r\n        window.addEventListener('mousedown', onSelectingMouseDown, true);\r\n        window.addEventListener('mouseup', onSelectingMouseUp, true);\r\n        window.addEventListener('click', onSelectingClick, true);\r\n    }\r\n\r\n    function initAttrs() {\r\n        attrs = [];\r\n        Object.keys(attrsConfig).forEach((key) => {\r\n            if (attrsConfig[key] && attrsConfig[key].enabled) {\r\n                attrs.push(key);\r\n            }\r\n        });\r\n        \r\n        var attrsBack = attrs;\r\n    }\r\n\r\n    function toggleRecording(toStart) {\r\n        recording = toStart;\r\n    }\r\n\r\n    function setSelectingType(type) {\r\n        selectingType = recording && type || null;\r\n        if (!selectingType) {\r\n            hideSelectingOverlay();\r\n        }\r\n    }\r\n\r\n    function setUpdateStateHandler(handler) {\r\n        updateStateHandler = handler;\r\n    }\r\n\r\n    function updateState(config) {\r\n        if (updateStateHandler) {\r\n            updateStateHandler(config);\r\n        }\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        console.log('update config: ' + JSON.stringify(config));\r\n        if (config.selectorConfig && config.selectorConfig.attrsConfig) {\r\n            attrsConfig = config.selectorConfig.attrsConfig;\r\n            initAttrs();\r\n        }\r\n    }\r\n\r\n    function isInRange(evt) {\r\n        var evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        return evtX >= 1 && evtY >= 1 && evtX <= (window.innerWidth - 1) && evtY <= (window.innerHeight - 1);\r\n    }\r\n\r\n    function onSelectingMouseOver(evt) {\r\n        var overLay,\r\n            target,\r\n            position,\r\n            targetBox,\r\n            size,\r\n            borderColor,\r\n            evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        overLay = getSelectingOverlay();        \r\n        if (selectingType === 'target') {\r\n            target = evt.target;\r\n            targetBox = target.getBoundingClientRect();\r\n            position = getPosition(target);\r\n            size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            }\r\n            \r\n            overLay.style.border = '2px solid #FF5733';\r\n        } else {\r\n            if (isMouseDown && regionStart){\r\n                size = {\r\n                    x: Math.min(regionStart.x, evtX) - 1,\r\n                    y: Math.min(regionStart.y, evtY) - 1,\r\n                    width: Math.abs(regionStart.x - evtX) + 2,\r\n                    height: Math.abs(regionStart.y - evtY) + 2\r\n                }\r\n            } else {\r\n                size = {\r\n                    x: evtX - 1,\r\n                    y: evtY - 1,\r\n                    width: 2,\r\n                    height: 2\r\n                }\r\n            }\r\n            \r\n            overLay.style.borderTop = size.y + 'px solid';\r\n            overLay.style.borderLeft = size.x + 'px solid';\r\n            overLay.style.borderRight = (window.innerWidth - size.x - size.width) + 'px solid';            \r\n            overLay.style.borderBottom = (window.innerHeight - size.y - size.height) + 'px solid';\r\n            overLay.style.borderColor = 'rgba(0, 0, 0, 0.7)';\r\n\r\n            size.x = document.body.scrollLeft;\r\n            size.y = document.body.scrollTop;\r\n        }\r\n\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n    }\r\n\r\n    function onSelectingMouseDown(evt) {\r\n        var overLay,\r\n            eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        if (selectingType === 'target') {\r\n            hideSelectingOverlay();\r\n            eventMessage = getVerifyTargetMessage(evt);\r\n            if (eventMessage) {\r\n                sendEventMessage({\r\n                    target: evt.target,\r\n                    message: eventMessage\r\n                });\r\n            }\r\n            updateState({key: 'selectingType', value: null});                \r\n        } else {\r\n            isMouseDown = true;\r\n            regionStart = {x: evt.clientX, y: evt.clientY};\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    function onSelectingMouseUp(evt) {\r\n        var eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        if (Math.abs(regionStart.x - evt.clientX) > 2 && Math.abs(regionStart.y - evt.clientY) > 2) {\r\n            sendEventMessage({\r\n                message: {\r\n                    type: 'screenshot',\r\n                    x: Math.min(regionStart.x, evt.clientX) - 1,\r\n                    y: Math.min(regionStart.y, evt.clientY) - 1,                    \r\n                    width: Math.abs(regionStart.x - evt.clientX) + 2,\r\n                    height: Math.abs(regionStart.y - evt.clientY) + 2\r\n                }\r\n            });\r\n        }\r\n\r\n        isMouseDown = false;\r\n        regionStart = null;\r\n    }\r\n\r\n    function onSelectingClick(evt) {\r\n        var overLay;\r\n\r\n        if (!selectingType) {\r\n            return;\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        hideSelectingOverlay();\r\n        selectingType = null;\r\n        updateState({key: 'selectingType', value: null});             \r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        var target = document.querySelector(cssPath);\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        var overLay = getSelectingOverlay();\r\n        var targetBox = target.getBoundingClientRect();\r\n        var position = getPosition(target);\r\n        var size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            };\r\n            \r\n        overLay.style.border = '2px solid #FF5733';\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n\r\n        setTimeout(() => {\r\n            hideSelectingOverlay();\r\n            selectingType = null;\r\n            updateState({key: 'selectingType', value: null}); \r\n        }, 2000);  \r\n    }\r\n\r\n    function hideSelectingOverlay() {\r\n        var overLay = getSelectingOverlay();\r\n        overLay.style.display = 'none';\r\n    }\r\n\r\n    function getSelectingOverlay() {\r\n        var el;\r\n\r\n        if (!selectTargetOverlay) {\r\n            el = window.document.createElement('div');\r\n            el.id = 'autom-select-target-overlay';\r\n            el.style.display = 'none';\r\n            el.style.position = 'fixed';\r\n            el.style.width = '100px';\r\n            el.style.border = '2px solid #FF5733';\r\n            el.style.height = '100px';\r\n            el.style.background = 'transparent';\r\n            el.style['pointer-events'] = 'none';\r\n            el.style['z-index'] = 100000;\r\n            el.style['box-sizing'] = 'content-box';\r\n            document.body.appendChild(el);\r\n            selectTargetOverlay = el;\r\n        }\r\n\r\n        return selectTargetOverlay;\r\n    }\r\n\r\n    function onEvent(evt) {\r\n        var eventMessage;\r\n\r\n        if (!recording || !eventCb || selectingType) {\r\n            return;\r\n        }\r\n\r\n        console.log(evt.type);\r\n        eventMessage = getEventMessage(evt);\r\n        if (eventMessage) {\r\n            sendEventMessage({\r\n                target: evt.target,\r\n                message: eventMessage\r\n            });\r\n        }\r\n    }\r\n\r\n    function sendEventMessage (eventMessage) {        \r\n        eventCb(eventMessage.message);\r\n    } \r\n\r\n    function getVerifyTargetMessage(evt) {\r\n        var type = 'verify',\r\n            target = getEventTarget(evt.target, true);\r\n\r\n        return {\r\n            type: type,\r\n            timeDiff: getTimeDiff(),\r\n            target: target\r\n        };\r\n    }\r\n\r\n    function getEventMessage(evt) {\r\n        var type = evt.type,\r\n            message = { type: type },\r\n            eventConfig = events[type],\r\n            target = getEventTarget(evt.target),\r\n            targetValue;\r\n\r\n        if (eventConfig) {\r\n            if (eventConfig.condition && !eventConfig.condition(evt)) {\r\n                return;\r\n            }\r\n\r\n            eventConfig.props.forEach(function (prop) {\r\n                var isPropFunc = prop.name && prop.fn,\r\n                    propName = isPropFunc ? prop.name : prop,\r\n                    propValue = isPropFunc ? prop.fn(evt) : evt[prop];\r\n\r\n                if (propValue !== undefined) {\r\n                    message[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (target) {\r\n            message.target = target;\r\n        }\r\n\r\n        message.timeDiff = getTimeDiff();\r\n        return message;\r\n    }\r\n\r\n    function getTimeDiff() {\r\n        var diff = 0;\r\n\r\n        if (!previousTime) {\r\n            previousTime = new Date().getTime();\r\n        } else {\r\n            diff = new Date().getTime() - previousTime;\r\n            previousTime += diff;\r\n        }\r\n\r\n        return diff;\r\n    }\r\n\r\n    function getEventTarget(target, includeText) {\r\n        var props = attrs.concat(['textContent', 'value']),\r\n            eventTarget = {};\r\n\r\n        if (!target) {\r\n            return null;\r\n        }\r\n\r\n        if (target === document) {\r\n            eventTarget.cssPath = 'body';\r\n            return eventTarget;\r\n        }\r\n\r\n        props.forEach(function (prop) {\r\n            addProp(target, prop, eventTarget);\r\n        });\r\n\r\n        if (eventTarget.textContent) {\r\n            eventTarget.textContent = eventTarget.textContent.replace(/\\r|\\n/g, '').substring(0, 100);\r\n        }\r\n\r\n        eventTarget.position = getPosition(target);\r\n        eventTarget.cssPath = getCssPath(target);\r\n\r\n        return eventTarget;\r\n    }\r\n\r\n    function addProp(source, key, dest) {\r\n        var value = source[key];\r\n        if (value && value.length) {\r\n            dest[key] = value;\r\n        }\r\n    }\r\n\r\n    function getCssPath(target) {\r\n        var currentTarget = target,\r\n            currentCssPath = buildCssPath(currentTarget),\r\n            cssPath,\r\n            els,\r\n            nth,\r\n            parent,\r\n            isUnique;\r\n\r\n        if (isUniqueSelector(currentCssPath)) {\r\n            return currentCssPath;\r\n        }\r\n\r\n        parent = currentTarget.parentNode;            \r\n        while (!isUnique && parent !== null) {\r\n            els = parent.querySelectorAll(currentCssPath);\r\n            if (els.length > 1) {\r\n                nth = Array.prototype.indexOf.call(els, currentTarget);\r\n                if (nth > -1) {\r\n                    currentCssPath += ':nth-child(' + (nth + 1) + ')';\r\n                }\r\n            }\r\n            \r\n            if (currentCssPath !== cssPath) {\r\n                cssPath = cssPath ? currentCssPath + ' ' + cssPath : currentCssPath;\r\n            }\r\n            currentTarget = parent;            \r\n            currentCssPath = buildCssPath(currentTarget);\r\n            isUnique = isUniqueSelector(cssPath);\r\n            parent = currentTarget.parentNode;\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function buildCssPath(target) {\r\n        var cssPath = '',\r\n            pathBuilder,\r\n            attr,\r\n            attrConfig,\r\n            attrValue,\r\n            matchValues,\r\n            i,\r\n            len = attrs.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            attr = attrs[i];\r\n            attrValue = target[attr];\r\n            if (!attrValue) {\r\n                continue;\r\n            }\r\n            \r\n            attrConfig = attrsConfig[attr];\r\n            pathBuilder = attrBuilderMap[attr];\r\n            if (pathBuilder) {\r\n                cssPath = pathBuilder(target, cssPath, attrConfig);    \r\n            } else {\r\n                matchValues = matches(attrConfig, [attrValue]);\r\n                if (matchValues.length) {\r\n                    cssPath += '[' + attr + '=\"' + matchValues[0] +'\"]';\r\n                }\r\n            }\r\n\r\n            if (isUniqueSelector(cssPath)) {\r\n                return cssPath;\r\n            }\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function matches(config, values) {\r\n        var resultMap = {},\r\n            includeRegex,\r\n            excludeRegex;\r\n\r\n        if (!config) {\r\n            return [];\r\n        }\r\n\r\n        if (!config.include && !config.exclude) {\r\n            return values;\r\n        }\r\n\r\n        includeRegex = config.include ? new RegExp(config.include) : null;\r\n        excludeRegex = config.exclude ? new RegExp(config.exclude) : null;\r\n        values.forEach(function(value) {\r\n            if (value && (!includeRegex || includeRegex.test(value)) && (!excludeRegex || !excludeRegex.test(value))) {\r\n                resultMap[value] = 1;\r\n            }\r\n        });\r\n\r\n        return Object.keys(resultMap);\r\n    }\r\n\r\n    function buildIdPath(target, cssPath, attrConfig) {\r\n        var id = target.id,\r\n            matchValues = matches(attrConfig, [id]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return cssPath + '#' + matchValues[0];\r\n    }\r\n\r\n    function buildTagPath(target, cssPath, attrConfig) {\r\n        var tagName = target.tagName,\r\n            matchValues = matches(attrConfig, [tagName]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return matchValues[0] + cssPath;\r\n    }\r\n    \r\n    function buildClassPath (target, cssPath, attrConfig) {\r\n        var matchValues = matches(attrConfig, Array.prototype.slice.call(target.classList));\r\n        if (!matchValues.length) {\r\n            return cssPath;            \r\n        }\r\n\r\n        matchValues.forEach((css) => {\r\n            cssPath += '.' + css;\r\n            if (isUniqueSelector(cssPath)) {\r\n                return cssPath;\r\n            }\r\n        });\r\n\r\n        return cssPath;\r\n    }    \r\n\r\n    function isUniqueSelector(cssPath, parent) {\r\n        if (!cssPath) {\r\n            return false;\r\n        }\r\n\r\n        parent = parent || window.document;\r\n        return window.document.querySelectorAll(cssPath).length === 1;\r\n    }\r\n\r\n    function getPosition(el) {\r\n        var elPosition = el.getBoundingClientRect && el.getBoundingClientRect();\r\n\r\n        return !elPosition ? { x: 0, y: 0 } : {\r\n            x: elPosition.left + window.scrollX,\r\n            y: elPosition.top + window.scrollY,\r\n            width: elPosition.width,\r\n            height: elPosition.height\r\n        }\r\n    }\r\n\r\n    eventModule = {\r\n        events: events,\r\n        startListening: startListening,\r\n        toggleRecording: toggleRecording,\r\n        setSelectingType: setSelectingType,\r\n        highlightElement: highlightElement,\r\n        updateConfig: updateConfig,\r\n        setUpdateStateHandler: setUpdateStateHandler\r\n    }\r\n\r\n    window.automEvents = Object.assign(window.automEvents || {}, eventModule);\r\n})();","(function () {\r\n    var state = {\r\n            recording: false\r\n        },\r\n        actions = {\r\n            start: startAction,\r\n            stop: stopAction,\r\n            selecttarget: selectTargetAction,\r\n            highlight: highlightElement,\r\n            updateconfig: updateConfig,\r\n            updatestate: updateState,\r\n            screenshot: screenshot\r\n        },\r\n        channel;\r\n\r\n    chrome.runtime.onMessage.addListener(\r\n        function (request, sender, sendResponse) {\r\n            var action = actions[request.action],\r\n                success = false;\r\n\r\n            if (action) {\r\n                action(request.value);\r\n                success = true;\r\n            }\r\n            sendResponse({ success: true });\r\n        });\r\n\r\n    function startAction() {\r\n        window.location.reload();\r\n    }\r\n\r\n    function stopAction() {\r\n        state.recording = false;\r\n        window.automEvents.toggleRecording(state.recording);\r\n        closeChannel();\r\n    }\r\n\r\n    function updateState(config) {\r\n        state[config.key] = config.value;\r\n        if(config.key === 'isPartialScreenshot' && !config.value && state.selectingType === 'region') {\r\n            screenshot();\r\n        }\r\n    }\r\n\r\n    function screenshot() {\r\n        state.selectingType = state.isPartialScreenshot && state.selectingType !== 'region' ? 'region' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function selectTargetAction() {\r\n        state.selectingType = state.selectingType !== 'target' ? 'target' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        window.automEvents.highlightElement(cssPath);\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        window.automEvents.updateConfig(config);\r\n    }\r\n\r\n    function start() {\r\n        window.automEvents.startListening(eventCallBack);\r\n        window.automEvents.setUpdateStateHandler(updateState);\r\n        window.addEventListener('unload', onUnLoad);\r\n\r\n        chrome.runtime.sendMessage({ action: 'isRecording' }, function (response) {\r\n            state.recording = response && response.isRecording;\r\n            if (state.recording) {\r\n                window.automEvents.toggleRecording(state.recording);\r\n                createChannel();\r\n\r\n                if (window.self === window.top) {\r\n                    sendMessage({\r\n                        notify: 'load'\r\n                    });\r\n                    sendMessage({\r\n                        type: 'setsize',\r\n                        sizes: {\r\n                            width: window.innerWidth,\r\n                            height: window.innerHeight\r\n                        }\r\n                    });\r\n                    sendMessage({\r\n                        type: 'url',\r\n                        url: window.location.href\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function onUnLoad() {\r\n        if (!state.recording) {\r\n            return true;\r\n        }\r\n\r\n        channel.postMessage({ stopRecording: true });\r\n    }\r\n\r\n    function createChannel() {\r\n        channel = chrome.runtime.connect({ name: \"automrecoder\" });\r\n\r\n        channel.onMessage.addListener(handlChannelMessage);\r\n    }\r\n\r\n    function handlChannelMessage(message) {\r\n\r\n    }\r\n\r\n    function closeChannel() {\r\n        channel.disconnect();\r\n    }\r\n\r\n    function eventCallBack(eventMessage) {\r\n        sendMessage(eventMessage);\r\n    }\r\n\r\n    function sendMessage(message) {\r\n        if (!state.recording) {\r\n            return;\r\n        }\r\n\r\n        channel.postMessage(message);\r\n    }\r\n\r\n    start();\r\n})()"],"sourceRoot":""}