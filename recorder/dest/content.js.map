{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./content/eventConfig.js","webpack:///./content/events.js","webpack:///./content/content.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isTextInput","events","target","tagName","toUpperCase","mouseenter","condition","evt","dblclick","props","clientX","clientY","detail","click","keydown","keyCode","keypress","keyup","scroll","fn","noParent","parentElement","left","window","pageXOffset","scrollLeft","top","pageYOffset","scrollTop","contextmenu","automEvents","eventConfig","attrsConfig","attrs","eventCb","recording","selectTargetOverlay","regionStart","eventModule","previousTime","updateStateHandler","attrBuilderMap","id","cssPath","attrConfig","matchValues","matches","length","classList","Array","slice","forEach","css","isUniqueSelector","selectingType","isMouseDown","updateState","config","isInRange","evtX","evtY","innerWidth","innerHeight","onSelectingMouseOver","overLay","position","targetBox","size","getSelectingOverlay","getBoundingClientRect","x","getPosition","y","width","height","style","border","Math","min","abs","borderTop","borderLeft","borderRight","borderBottom","borderColor","document","body","display","onSelectingMouseDown","eventMessage","hideSelectingOverlay","getEventTarget","type","timeDiff","getTimeDiff","getVerifyTargetMessage","sendEventMessage","message","stopPropagation","preventDefault","onSelectingMouseUp","onSelectingClick","el","createElement","background","appendChild","onEvent","console","log","prop","isPropFunc","propName","propValue","undefined","getEventMessage","diff","Date","getTime","includeText","concat","eventTarget","dest","textContent","replace","substring","els","nth","parent","isUnique","currentTarget","currentCssPath","buildCssPath","parentNode","querySelectorAll","indexOf","getCssPath","pathBuilder","attr","attrValue","len","values","includeRegex","excludeRegex","resultMap","include","exclude","RegExp","test","keys","elPosition","scrollX","scrollY","startListening","cb","event","addEventListener","toggleRecording","toStart","setSelectingType","highlightElement","querySelector","setTimeout","updateConfig","JSON","stringify","selectorConfig","enabled","push","initAttrs","setUpdateStateHandler","handler","assign","channel","state","actions","start","location","reload","stop","disconnect","selecttarget","highlight","updateconfig","updatestate","screenshot","isPartialScreenshot","onUnLoad","postMessage","stopRecording","handlChannelMessage","eventCallBack","sendMessage","chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","success","response","isRecording","connect","self","notify","sizes","url","href"],"mappings":"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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 290);\n","(function () {\r\n    var isTextInput = function (target) {\r\n        var tagName = target && target.tagName && target.tagName.toUpperCase();\r\n        if (!tagName) {\r\n            return false;\r\n        }\r\n        return tagName === 'TEXTAREA' || tagName === 'INPUT';\r\n    },\r\n        events = {\r\n            mouseenter: {\r\n                condition: function (evt) {\r\n                    return false;\r\n                }\r\n            },\r\n            dblclick: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0);\r\n                }\r\n            },\r\n            click: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0 && evt.target && evt.target.tagName.toUpperCase() !== 'SELECT');\r\n                }\r\n            },\r\n            keydown: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return evt.keyCode === 8 || evt.keyCode === 46 || evt.keyCode === 13;\r\n                }\r\n            },\r\n            keypress: {\r\n                props: ['key', 'keyCode', , 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return !isTextInput(evt.target);\r\n                }\r\n            },\r\n            keyup: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return isTextInput(evt.target) && evt.keyCode !== 13;\r\n                }\r\n            },\r\n            scroll: {\r\n                props: ['detail', {\r\n                    name: 'scroll', fn: function scroll(evt) {\r\n                        var target = evt.target,\r\n                            noParent = !target.parentElement,\r\n                            scrollLeft = !noParent ? target.scrollLeft : window.pageXOffset,\r\n                            scrollTop = !noParent ? target.scrollTop : window.pageYOffset;\r\n\r\n                        return { left: scrollLeft, top: scrollTop };\r\n                    }\r\n                }]\r\n            },\r\n            contextmenu: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            }\r\n            // wheel: {\r\n            //     props: ['deltaX ', 'deltaY', 'deltaZ', 'deltaMode', 'altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n            // mousedown: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mousemove: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mouseup: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n        };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.eventConfig = events;\r\n})();","(function () {\r\n    var automEvents = window.automEvents,\r\n        events = automEvents.eventConfig,\r\n        setting,\r\n        attrsConfig,\r\n        attrs,\r\n        commands = {\r\n            sceenshot: {\r\n                keys: []\r\n            },\r\n            verifytarget: {\r\n                keys: []\r\n            }\r\n        },\r\n        attrBuilderMap = {\r\n            'id': buildIdPath,\r\n            'tagName': buildTagPath,\r\n            'classList': buildClassPath\r\n        },\r\n        eventCb,\r\n        recording,\r\n        selectingType = null,\r\n        isScreenshot,\r\n        selectTargetOverlay,\r\n        regionStart,\r\n        isMouseDown = false,\r\n        eventModule,\r\n        previousTime,\r\n        updateStateHandler;\r\n\r\n    function startListening(cb) {\r\n        eventCb = cb;\r\n\r\n        Object.keys(events).forEach(function (event) {\r\n            var eventConfig = events[event];\r\n            window.addEventListener(event, onEvent, true);\r\n        });\r\n\r\n        window.addEventListener('mousemove', onSelectingMouseOver, true);\r\n        window.addEventListener('mousedown', onSelectingMouseDown, true);\r\n        window.addEventListener('mouseup', onSelectingMouseUp, true);\r\n        window.addEventListener('click', onSelectingClick, true);\r\n    }\r\n\r\n    function initAttrs(attrsConfig) {\r\n        attrs = [];\r\n        if (!attrsConfig) {\r\n            return;\r\n        }\r\n        \r\n        Object.keys(attrsConfig).forEach((key) => {\r\n            if (attrsConfig[key] && attrsConfig[key].enabled) {\r\n                attrs.push(key);\r\n            }\r\n        });\r\n    }\r\n\r\n    function toggleRecording(toStart) {\r\n        recording = toStart;\r\n    }\r\n\r\n    function setSelectingType(type) {\r\n        selectingType = recording && type || null;\r\n        if (!selectingType) {\r\n            hideSelectingOverlay();\r\n        }\r\n    }\r\n\r\n    function setUpdateStateHandler(handler) {\r\n        updateStateHandler = handler;\r\n    }\r\n\r\n    function updateState(config) {\r\n        if (updateStateHandler) {\r\n            updateStateHandler(config);\r\n        }\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        console.log('update config: ' + JSON.stringify(config));\r\n        setting = config;\r\n        if (config.selectorConfig && config.selectorConfig.attrsConfig) {\r\n            attrsConfig = config.selectorConfig.attrsConfig;\r\n            initAttrs(attrsConfig);\r\n        }\r\n    }\r\n\r\n    function isInRange(evt) {\r\n        var evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        return evtX >= 1 && evtY >= 1 && evtX <= (window.innerWidth - 1) && evtY <= (window.innerHeight - 1);\r\n    }\r\n\r\n    function onSelectingMouseOver(evt) {\r\n        var overLay,\r\n            target,\r\n            position,\r\n            targetBox,\r\n            size,\r\n            borderColor,\r\n            evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        overLay = getSelectingOverlay();        \r\n        if (selectingType === 'target') {\r\n            target = evt.target;\r\n            targetBox = target.getBoundingClientRect();\r\n            position = getPosition(target);\r\n            size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            }\r\n            \r\n            overLay.style.border = '2px solid #FF5733';\r\n        } else {\r\n            if (isMouseDown && regionStart){\r\n                size = {\r\n                    x: Math.min(regionStart.x, evtX) - 1,\r\n                    y: Math.min(regionStart.y, evtY) - 1,\r\n                    width: Math.abs(regionStart.x - evtX) + 2,\r\n                    height: Math.abs(regionStart.y - evtY) + 2\r\n                }\r\n            } else {\r\n                size = {\r\n                    x: evtX - 1,\r\n                    y: evtY - 1,\r\n                    width: 2,\r\n                    height: 2\r\n                }\r\n            }\r\n            \r\n            overLay.style.borderTop = size.y + 'px solid';\r\n            overLay.style.borderLeft = size.x + 'px solid';\r\n            overLay.style.borderRight = (window.innerWidth - size.x - size.width) + 'px solid';            \r\n            overLay.style.borderBottom = (window.innerHeight - size.y - size.height) + 'px solid';\r\n            overLay.style.borderColor = 'rgba(0, 0, 0, 0.7)';\r\n\r\n            size.x = document.body.scrollLeft;\r\n            size.y = document.body.scrollTop;\r\n        }\r\n\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n    }\r\n\r\n    function onSelectingMouseDown(evt) {\r\n        var overLay,\r\n            eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        if (selectingType === 'target') {\r\n            hideSelectingOverlay();\r\n            eventMessage = getVerifyTargetMessage(evt);\r\n            if (eventMessage) {\r\n                sendEventMessage({\r\n                    target: evt.target,\r\n                    message: eventMessage\r\n                });\r\n            }\r\n            updateState({key: 'selectingType', value: null});                \r\n        } else {\r\n            isMouseDown = true;\r\n            regionStart = {x: evt.clientX, y: evt.clientY};\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    function onSelectingMouseUp(evt) {\r\n        var eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        if (Math.abs(regionStart.x - evt.clientX) > 2 && Math.abs(regionStart.y - evt.clientY) > 2) {\r\n            sendEventMessage({\r\n                message: {\r\n                    type: 'screenshot',\r\n                    x: Math.min(regionStart.x, evt.clientX) - 1,\r\n                    y: Math.min(regionStart.y, evt.clientY) - 1,                    \r\n                    width: Math.abs(regionStart.x - evt.clientX) + 2,\r\n                    height: Math.abs(regionStart.y - evt.clientY) + 2\r\n                }\r\n            });\r\n        }\r\n\r\n        isMouseDown = false;\r\n        regionStart = null;\r\n    }\r\n\r\n    function onSelectingClick(evt) {\r\n        var overLay;\r\n\r\n        if (!selectingType) {\r\n            return;\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        hideSelectingOverlay();\r\n        selectingType = null;\r\n        updateState({key: 'selectingType', value: null});             \r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        var target = document.querySelector(cssPath);\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        var overLay = getSelectingOverlay();\r\n        var targetBox = target.getBoundingClientRect();\r\n        var position = getPosition(target);\r\n        var size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            };\r\n            \r\n        overLay.style.border = '2px solid #FF5733';\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n\r\n        setTimeout(() => {\r\n            hideSelectingOverlay();\r\n            selectingType = null;\r\n            updateState({key: 'selectingType', value: null}); \r\n        }, 2000);  \r\n    }\r\n\r\n    function hideSelectingOverlay() {\r\n        var overLay = getSelectingOverlay();\r\n        overLay.style.display = 'none';\r\n    }\r\n\r\n    function getSelectingOverlay() {\r\n        var el;\r\n\r\n        if (!selectTargetOverlay) {\r\n            el = window.document.createElement('div');\r\n            el.id = 'autom-select-target-overlay';\r\n            el.style.display = 'none';\r\n            el.style.position = 'fixed';\r\n            el.style.width = '100px';\r\n            el.style.border = '2px solid #FF5733';\r\n            el.style.height = '100px';\r\n            el.style.background = 'transparent';\r\n            el.style['pointer-events'] = 'none';\r\n            el.style['z-index'] = 100000;\r\n            el.style['box-sizing'] = 'content-box';\r\n            document.body.appendChild(el);\r\n            selectTargetOverlay = el;\r\n        }\r\n\r\n        return selectTargetOverlay;\r\n    }\r\n\r\n    function onEvent(evt) {\r\n        var eventMessage;\r\n\r\n        if (!recording || !eventCb || selectingType) {\r\n            return;\r\n        }\r\n\r\n        console.log(evt.type);\r\n        eventMessage = getEventMessage(evt);\r\n        if (eventMessage) {\r\n            sendEventMessage({\r\n                target: evt.target,\r\n                message: eventMessage\r\n            });\r\n        }\r\n    }\r\n\r\n    function sendEventMessage (eventMessage) {        \r\n        eventCb(eventMessage.message);\r\n    } \r\n\r\n    function getVerifyTargetMessage(evt) {\r\n        var type = 'verify',\r\n            target = getEventTarget(evt.target, true);\r\n\r\n        return {\r\n            type: type,\r\n            timeDiff: getTimeDiff(),\r\n            target: target\r\n        };\r\n    }\r\n\r\n    function getEventMessage(evt) {\r\n        var type = evt.type,\r\n            message = { type: type },\r\n            eventConfig = events[type],\r\n            target = getEventTarget(evt.target),\r\n            targetValue;\r\n\r\n        if (eventConfig) {\r\n            if (eventConfig.condition && !eventConfig.condition(evt)) {\r\n                return;\r\n            }\r\n\r\n            eventConfig.props.forEach(function (prop) {\r\n                var isPropFunc = prop.name && prop.fn,\r\n                    propName = isPropFunc ? prop.name : prop,\r\n                    propValue = isPropFunc ? prop.fn(evt) : evt[prop];\r\n\r\n                if (propValue !== undefined) {\r\n                    message[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (target) {\r\n            message.target = target;\r\n        }\r\n\r\n        message.timeDiff = getTimeDiff();\r\n        return message;\r\n    }\r\n\r\n    function getTimeDiff() {\r\n        var diff = 0;\r\n\r\n        if (!previousTime) {\r\n            previousTime = new Date().getTime();\r\n        } else {\r\n            diff = new Date().getTime() - previousTime;\r\n            previousTime += diff;\r\n        }\r\n\r\n        return diff;\r\n    }\r\n\r\n    function getEventTarget(target, includeText) {\r\n        var props = attrs.concat(['textContent', 'value']),\r\n            eventTarget = {};\r\n\r\n        if (!target) {\r\n            return null;\r\n        }\r\n\r\n        if (target === document) {\r\n            eventTarget.cssPath = 'body';\r\n            return eventTarget;\r\n        }\r\n\r\n        props.forEach(function (prop) {\r\n            addProp(target, prop, eventTarget);\r\n        });\r\n\r\n        if (eventTarget.textContent) {\r\n            eventTarget.textContent = eventTarget.textContent.replace(/\\r|\\n/g, '').substring(0, 100);\r\n        }\r\n\r\n        eventTarget.position = getPosition(target);\r\n        eventTarget.cssPath = getCssPath(target);\r\n\r\n        return eventTarget;\r\n    }\r\n\r\n    function addProp(source, key, dest) {\r\n        var value = source[key];\r\n        if (value && value.length) {\r\n            dest[key] = value;\r\n        }\r\n    }\r\n\r\n    function getCssPath(target) {\r\n        var currentTarget = target,\r\n            currentCssPath = buildCssPath(currentTarget),\r\n            cssPath,\r\n            els,\r\n            nth,\r\n            parent,\r\n            isUnique;\r\n\r\n        if (isUniqueSelector(currentCssPath)) {\r\n            return currentCssPath;\r\n        }\r\n\r\n        parent = currentTarget.parentNode;            \r\n        while (!isUnique && parent !== null) {\r\n            els = parent.querySelectorAll(currentCssPath);\r\n            if (els.length > 1) {\r\n                nth = Array.prototype.indexOf.call(els, currentTarget);\r\n                if (nth > -1) {\r\n                    currentCssPath += ':nth-child(' + (nth + 1) + ')';\r\n                }\r\n            }\r\n            \r\n            if (currentCssPath !== cssPath) {\r\n                cssPath = cssPath ? currentCssPath + ' ' + cssPath : currentCssPath;\r\n            }\r\n            currentTarget = parent;            \r\n            currentCssPath = buildCssPath(currentTarget);\r\n            isUnique = isUniqueSelector(cssPath);\r\n            parent = currentTarget.parentNode;\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function buildCssPath(target) {\r\n        var cssPath = '',\r\n            pathBuilder,\r\n            attr,\r\n            attrConfig,\r\n            attrValue,\r\n            matchValues,\r\n            i,\r\n            len = attrs.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            attr = attrs[i];\r\n            attrValue = target[attr];\r\n            if (!attrValue) {\r\n                continue;\r\n            }\r\n            \r\n            attrConfig = attrsConfig[attr];\r\n            pathBuilder = attrBuilderMap[attr];\r\n            if (pathBuilder) {\r\n                cssPath = pathBuilder(target, cssPath, attrConfig);    \r\n            } else {\r\n                matchValues = matches(attrConfig, [attrValue]);\r\n                if (matchValues.length) {\r\n                    cssPath += '[' + attr + '=\"' + matchValues[0] +'\"]';\r\n                }\r\n            }\r\n\r\n            if (isUniqueSelector(cssPath)) {\r\n                return cssPath;\r\n            }\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function matches(config, values) {\r\n        var resultMap = {},\r\n            includeRegex,\r\n            excludeRegex;\r\n\r\n        if (!config) {\r\n            return [];\r\n        }\r\n\r\n        if (!config.include && !config.exclude) {\r\n            return values;\r\n        }\r\n\r\n        includeRegex = config.include ? new RegExp(config.include) : null;\r\n        excludeRegex = config.exclude ? new RegExp(config.exclude) : null;\r\n        values.forEach(function(value) {\r\n            if (value && (!includeRegex || includeRegex.test(value)) && (!excludeRegex || !excludeRegex.test(value))) {\r\n                resultMap[value] = 1;\r\n            }\r\n        });\r\n\r\n        return Object.keys(resultMap);\r\n    }\r\n\r\n    function buildIdPath(target, cssPath, attrConfig) {\r\n        var id = target.id,\r\n            matchValues = matches(attrConfig, [id]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return cssPath + '#' + matchValues[0];\r\n    }\r\n\r\n    function buildTagPath(target, cssPath, attrConfig) {\r\n        var tagName = target.tagName,\r\n            matchValues = matches(attrConfig, [tagName]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return matchValues[0] + cssPath;\r\n    }\r\n    \r\n    function buildClassPath (target, cssPath, attrConfig) {\r\n        var matchValues = matches(attrConfig, Array.prototype.slice.call(target.classList));\r\n        if (!matchValues.length) {\r\n            return cssPath;            \r\n        }\r\n\r\n        matchValues.forEach((css) => {\r\n            cssPath += '.' + css;\r\n            if (isUniqueSelector(cssPath)) {\r\n                return cssPath;\r\n            }\r\n        });\r\n\r\n        return cssPath;\r\n    }    \r\n\r\n    function isUniqueSelector(cssPath, parent) {\r\n        if (!cssPath) {\r\n            return false;\r\n        }\r\n\r\n        parent = parent || window.document;\r\n        return window.document.querySelectorAll(cssPath).length === 1;\r\n    }\r\n\r\n    function getPosition(el) {\r\n        var elPosition = el.getBoundingClientRect && el.getBoundingClientRect();\r\n\r\n        return !elPosition ? { x: 0, y: 0 } : {\r\n            x: elPosition.left + window.scrollX,\r\n            y: elPosition.top + window.scrollY,\r\n            width: elPosition.width,\r\n            height: elPosition.height\r\n        }\r\n    }\r\n\r\n    eventModule = {\r\n        events: events,\r\n        startListening: startListening,\r\n        toggleRecording: toggleRecording,\r\n        setSelectingType: setSelectingType,\r\n        highlightElement: highlightElement,\r\n        updateConfig: updateConfig,\r\n        setUpdateStateHandler: setUpdateStateHandler\r\n    }\r\n\r\n    window.automEvents = Object.assign(window.automEvents || {}, eventModule);\r\n})();","(function () {\r\n    var state = {\r\n            recording: false\r\n        },\r\n        actions = {\r\n            start: startAction,\r\n            stop: stopAction,\r\n            selecttarget: selectTargetAction,\r\n            highlight: highlightElement,\r\n            updateconfig: updateConfig,\r\n            updatestate: updateState,\r\n            screenshot: screenshot\r\n        },\r\n        channel;\r\n\r\n    chrome.runtime.onMessage.addListener(\r\n        function (request, sender, sendResponse) {\r\n            var action = actions[request.action],\r\n                success = false;\r\n\r\n            if (action) {\r\n                action(request.value);\r\n                success = true;\r\n            }\r\n            sendResponse({ success: true });\r\n        });\r\n\r\n    function startAction() {\r\n        window.location.reload();\r\n    }\r\n\r\n    function stopAction() {\r\n        state.recording = false;\r\n        window.automEvents.toggleRecording(state.recording);\r\n        closeChannel();\r\n    }\r\n\r\n    function updateState(config) {\r\n        state[config.key] = config.value;\r\n        if(config.key === 'isPartialScreenshot' && !config.value && state.selectingType === 'region') {\r\n            screenshot();\r\n        }\r\n    }\r\n\r\n    function screenshot() {\r\n        state.selectingType = state.isPartialScreenshot && state.selectingType !== 'region' ? 'region' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function selectTargetAction() {\r\n        state.selectingType = state.selectingType !== 'target' ? 'target' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        window.automEvents.highlightElement(cssPath);\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        window.automEvents.updateConfig(config);\r\n    }\r\n\r\n    function start() {\r\n        window.automEvents.startListening(eventCallBack);\r\n        window.automEvents.setUpdateStateHandler(updateState);\r\n        window.addEventListener('unload', onUnLoad);\r\n\r\n        chrome.runtime.sendMessage({ action: 'isRecording' }, function (response) {\r\n            state.recording = response && response.isRecording;\r\n            if (state.recording) {\r\n                window.automEvents.toggleRecording(state.recording);\r\n                createChannel();\r\n\r\n                if (window.self === window.top) {\r\n                    sendMessage({\r\n                        notify: 'load'\r\n                    });\r\n                    sendMessage({\r\n                        type: 'setsize',\r\n                        sizes: {\r\n                            width: window.innerWidth,\r\n                            height: window.innerHeight\r\n                        }\r\n                    });\r\n                    sendMessage({\r\n                        type: 'url',\r\n                        url: window.location.href\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function onUnLoad() {\r\n        if (!state.recording) {\r\n            return true;\r\n        }\r\n\r\n        channel.postMessage({ stopRecording: true });\r\n    }\r\n\r\n    function createChannel() {\r\n        channel = chrome.runtime.connect({ name: \"automrecoder\" });\r\n\r\n        channel.onMessage.addListener(handlChannelMessage);\r\n    }\r\n\r\n    function handlChannelMessage(message) {\r\n\r\n    }\r\n\r\n    function closeChannel() {\r\n        channel.disconnect();\r\n    }\r\n\r\n    function eventCallBack(eventMessage) {\r\n        sendMessage(eventMessage);\r\n    }\r\n\r\n    function sendMessage(message) {\r\n        if (!state.recording) {\r\n            return;\r\n        }\r\n\r\n        channel.postMessage(message);\r\n    }\r\n\r\n    start();\r\n})()"],"sourceRoot":""}