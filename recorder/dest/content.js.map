{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./content/content.js","webpack:///./content/cssPathBuilder.js","webpack:///./content/eventConfig.js","webpack:///./content/events.js"],"names":["state","recording","actions","start","startAction","stop","stopAction","selecttarget","selectTargetAction","highlight","highlightElement","updateconfig","updateConfig","updatestate","updateState","screenshot","channel","chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","success","value","window","location","reload","automEvents","toggleRecording","closeChannel","config","key","selectingType","isPartialScreenshot","setSelectingType","cssPath","startListening","eventCallBack","setUpdateStateHandler","addEventListener","onUnLoad","sendMessage","response","isRecording","createChannel","self","top","notify","type","sizes","width","innerWidth","height","innerHeight","url","href","postMessage","stopRecording","connect","name","handlChannelMessage","message","disconnect","eventMessage","attrsConfig","attrs","attrBuilderMap","buildIdPath","buildTagPath","buildClassPath","updateAttrsConfig","newConfig","newAttrs","build","target","currentTarget","currentCssPath","buildCssPath","els","nth","parent","uniqueParent","isUnique","isUniqueSelector","parentNode","getUniqueParent","querySelectorAll","length","Array","prototype","indexOf","call","children","node","pathBuilder","attr","i","len","buildAttrPath","id","attrConfig","matchValues","matches","tagName","slice","classList","forEach","css","attrValue","document","values","resultMap","includeRegex","excludeRegex","include","exclude","RegExp","test","Object","keys","cssPathBuilder","isTextInput","toUpperCase","events","mouseenter","condition","evt","dblclick","props","clientX","clientY","detail","click","keydown","keyCode","keypress","keyup","scroll","fn","noParent","parentElement","scrollLeft","pageXOffset","scrollTop","pageYOffset","left","contextmenu","eventConfig","eventCb","selectTargetOverlay","regionStart","isMouseDown","eventModule","previousTime","updateStateHandler","cb","event","onEvent","onSelectingMouseOver","onSelectingMouseDown","onSelectingMouseUp","onSelectingClick","toStart","hideSelectingOverlay","handler","console","log","JSON","stringify","selectorConfig","enabled","push","isInRange","evtX","evtY","overLay","position","targetBox","size","borderColor","getSelectingOverlay","getBoundingClientRect","getPosition","x","y","style","border","Math","min","abs","borderTop","borderLeft","borderRight","borderBottom","body","display","getVerifyTargetMessage","sendEventMessage","stopPropagation","preventDefault","querySelector","setTimeout","el","createElement","background","appendChild","getEventMessage","getEventTarget","timeDiff","getTimeDiff","prop","isPropFunc","propName","propValue","undefined","diff","Date","getTime","includeText","concat","eventTarget","addProp","textContent","replace","substring","source","dest","elPosition","scrollX","scrollY","assign"],"mappings":"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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","(function () {\r\n    var state = {\r\n            recording: false\r\n        },\r\n        actions = {\r\n            start: startAction,\r\n            stop: stopAction,\r\n            selecttarget: selectTargetAction,\r\n            highlight: highlightElement,\r\n            updateconfig: updateConfig,\r\n            updatestate: updateState,\r\n            screenshot: screenshot\r\n        },\r\n        channel;\r\n\r\n    chrome.runtime.onMessage.addListener(\r\n        function (request, sender, sendResponse) {\r\n            var action = actions[request.action],\r\n                success = false;\r\n\r\n            if (action) {\r\n                action(request.value);\r\n                success = true;\r\n            }\r\n            sendResponse({ success: true });\r\n        });\r\n\r\n    function startAction() {\r\n        window.location.reload();\r\n    }\r\n\r\n    function stopAction() {\r\n        state.recording = false;\r\n        window.automEvents.toggleRecording(state.recording);\r\n        closeChannel();\r\n    }\r\n\r\n    function updateState(config) {\r\n        state[config.key] = config.value;\r\n        if(config.key === 'isPartialScreenshot' && !config.value && state.selectingType === 'region') {\r\n            screenshot();\r\n        }\r\n    }\r\n\r\n    function screenshot() {\r\n        state.selectingType = state.isPartialScreenshot && state.selectingType !== 'region' ? 'region' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function selectTargetAction() {\r\n        state.selectingType = state.selectingType !== 'target' ? 'target' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        window.automEvents.highlightElement(cssPath);\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        window.automEvents.updateConfig(config);\r\n    }\r\n\r\n    function start() {\r\n        window.automEvents.startListening(eventCallBack);\r\n        window.automEvents.setUpdateStateHandler(updateState);\r\n        window.addEventListener('unload', onUnLoad);\r\n\r\n        chrome.runtime.sendMessage({ action: 'isRecording' }, function (response) {\r\n            state.recording = response && response.isRecording;\r\n            if (state.recording) {\r\n                window.automEvents.toggleRecording(state.recording);\r\n                createChannel();\r\n\r\n                if (window.self === window.top) {\r\n                    sendMessage({\r\n                        notify: 'load'\r\n                    });\r\n                    sendMessage({\r\n                        type: 'setsize',\r\n                        sizes: {\r\n                            width: window.innerWidth,\r\n                            height: window.innerHeight\r\n                        }\r\n                    });\r\n                    sendMessage({\r\n                        type: 'url',\r\n                        url: window.location.href\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function onUnLoad() {\r\n        if (!state.recording) {\r\n            return true;\r\n        }\r\n\r\n        channel.postMessage({ stopRecording: true });\r\n    }\r\n\r\n    function createChannel() {\r\n        channel = chrome.runtime.connect({ name: \"automrecoder\" });\r\n\r\n        channel.onMessage.addListener(handlChannelMessage);\r\n    }\r\n\r\n    function handlChannelMessage(message) {\r\n\r\n    }\r\n\r\n    function closeChannel() {\r\n        channel.disconnect();\r\n    }\r\n\r\n    function eventCallBack(eventMessage) {\r\n        sendMessage(eventMessage);\r\n    }\r\n\r\n    function sendMessage(message) {\r\n        if (!state.recording) {\r\n            return;\r\n        }\r\n\r\n        channel.postMessage(message);\r\n    }\r\n\r\n    start();\r\n})()","(function () {\r\n    var attrsConfig,\r\n        attrs,\r\n        attrBuilderMap = {\r\n            'id': buildIdPath,\r\n            'tagName': buildTagPath,\r\n            'classList': buildClassPath\r\n        };\r\n\r\n    function updateAttrsConfig(newConfig, newAttrs) {\r\n        attrsConfig = newConfig;\r\n        attrs = newAttrs;\r\n    }\r\n\r\n    function build(target) {\r\n        var currentTarget = target,\r\n            currentCssPath = buildCssPath(currentTarget),\r\n            cssPath,\r\n            els,\r\n            nth,\r\n            parent,\r\n            uniqueParent,\r\n            isUnique;\r\n\r\n        if (isUniqueSelector(currentCssPath)) {\r\n            return currentCssPath;\r\n        }\r\n\r\n        parent = currentTarget.parentNode;      \r\n        uniqueParent = getUniqueParent(parent);\r\n        while (!isUnique && parent !== null) {\r\n            els = parent.querySelectorAll(currentCssPath);\r\n            if (els.length > 1) {\r\n                nth = Array.prototype.indexOf.call(parent.children, currentTarget);\r\n                if (nth > -1) {\r\n                    currentCssPath += ':nth-child(' + (nth + 1) + ')';\r\n                }\r\n            }\r\n            \r\n            if (currentCssPath !== cssPath) {\r\n                cssPath = cssPath ? currentCssPath + ' ' + cssPath : currentCssPath;\r\n            }\r\n            currentTarget = parent;            \r\n            currentCssPath = buildCssPath(currentTarget);\r\n            isUnique = isUniqueSelector(cssPath, uniqueParent.node);\r\n            parent = currentTarget.parentNode;\r\n        }\r\n\r\n        return uniqueParent ? uniqueParent.cssPath + ' ' + cssPath : cssPath;\r\n    }\r\n    \r\n    function getUniqueParent(node) {\r\n        var parent = node.parentNode,\r\n            cssPath = buildCssPath(node),\r\n            isUnique = isUniqueSelector(cssPath);\r\n        \r\n        while(!isUnique && parent !== null) {\r\n            cssPath = buildCssPath(parent);\r\n            isUnique = isUniqueSelector(cssPath);\r\n            node = parent;\r\n            parent = parent.parentNode;\r\n        }\r\n\r\n        return {\r\n            node: node,\r\n            cssPath: cssPath\r\n        };\r\n    }\r\n\r\n    function buildCssPath(target, parent) {\r\n        var cssPath = '',\r\n            pathBuilder,\r\n            attr,\r\n            i,\r\n            len = attrs.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            attr = attrs[i];\r\n            if (!target[attr]) {\r\n                continue;\r\n            }\r\n            \r\n            pathBuilder = attrBuilderMap[attr] || buildAttrPath;\r\n            cssPath = pathBuilder(target, attr, cssPath, parent);\r\n\r\n            if (isUniqueSelector(cssPath, parent)) {\r\n                return cssPath;\r\n            }\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function buildIdPath(target, attr, cssPath, parent) {\r\n        var id = target.id,            \r\n            attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, [id]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return cssPath + '#' + matchValues[0];\r\n    }\r\n\r\n    function buildTagPath(target, attr, cssPath, parent) {\r\n        var tagName = target.tagName,\r\n            attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, [tagName]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return matchValues[0] + cssPath;\r\n    }\r\n    \r\n    function buildClassPath (target, attr, cssPath, parent) {\r\n        var attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, Array.prototype.slice.call(target.classList));\r\n        if (!matchValues.length) {\r\n            return cssPath;            \r\n        }\r\n\r\n        matchValues.forEach((css) => {\r\n            cssPath += '.' + css;\r\n            if (isUniqueSelector(cssPath, parent)) {\r\n                return cssPath;\r\n            }\r\n        });\r\n\r\n        return cssPath;\r\n    }\r\n    \r\n    function buildAttrPath(target, attr, cssPath, parent) {\r\n        var attrValue = target[attr],\r\n            attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, [attrValue]);\r\n\r\n        if (matchValues.length) {\r\n            cssPath += '[' + attr + '=\"' + matchValues[0] +'\"]';\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function isUniqueSelector(cssPath, parent) {\r\n        if (!cssPath) {\r\n            return false;\r\n        }\r\n\r\n        parent = parent || window.document;\r\n        return parent.querySelectorAll(cssPath).length === 1;\r\n    }\r\n\r\n    function matches(config, values) {\r\n        var resultMap = {},\r\n            includeRegex,\r\n            excludeRegex;\r\n\r\n        if (!config) {\r\n            return [];\r\n        }\r\n\r\n        if (!config.include && !config.exclude) {\r\n            return values;\r\n        }\r\n\r\n        includeRegex = config.include ? new RegExp(config.include) : null;\r\n        excludeRegex = config.exclude ? new RegExp(config.exclude) : null;\r\n        values.forEach(function(value) {\r\n            if (value && (!includeRegex || includeRegex.test(value)) && (!excludeRegex || !excludeRegex.test(value))) {\r\n                resultMap[value] = 1;\r\n            }\r\n        });\r\n\r\n        return Object.keys(resultMap);\r\n    }\r\n\r\n    var cssPathBuilder = {\r\n        updateAttrsConfig: updateAttrsConfig,\r\n        build: build\r\n    };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.cssPathBuilder = cssPathBuilder;\r\n})();","(function () {\r\n    var isTextInput = function (target) {\r\n        var tagName = target && target.tagName && target.tagName.toUpperCase();\r\n        if (!tagName) {\r\n            return false;\r\n        }\r\n        return tagName === 'TEXTAREA' || tagName === 'INPUT';\r\n    },\r\n        events = {\r\n            mouseenter: {\r\n                condition: function (evt) {\r\n                    return false;\r\n                }\r\n            },\r\n            dblclick: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0);\r\n                }\r\n            },\r\n            click: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0 && evt.target && evt.target.tagName.toUpperCase() !== 'SELECT');\r\n                }\r\n            },\r\n            keydown: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return evt.keyCode === 8 || evt.keyCode === 46 || evt.keyCode === 13;\r\n                }\r\n            },\r\n            keypress: {\r\n                props: ['key', 'keyCode', , 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return !isTextInput(evt.target);\r\n                }\r\n            },\r\n            keyup: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return isTextInput(evt.target) && evt.keyCode !== 13;\r\n                }\r\n            },\r\n            scroll: {\r\n                props: ['detail', {\r\n                    name: 'scroll', fn: function scroll(evt) {\r\n                        var target = evt.target,\r\n                            noParent = !target.parentElement,\r\n                            scrollLeft = !noParent ? target.scrollLeft : window.pageXOffset,\r\n                            scrollTop = !noParent ? target.scrollTop : window.pageYOffset;\r\n\r\n                        return { left: scrollLeft, top: scrollTop };\r\n                    }\r\n                }]\r\n            },\r\n            contextmenu: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            }\r\n            // wheel: {\r\n            //     props: ['deltaX ', 'deltaY', 'deltaZ', 'deltaMode', 'altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n            // mousedown: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mousemove: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mouseup: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n        };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.eventConfig = events;\r\n})();","(function () {\r\n    var automEvents = window.automEvents,\r\n        events = automEvents.eventConfig,\r\n        attrs,\r\n        eventCb,\r\n        recording,\r\n        selectingType = null,\r\n        selectTargetOverlay,\r\n        regionStart,\r\n        isMouseDown = false,\r\n        eventModule,\r\n        previousTime,\r\n        updateStateHandler;\r\n\r\n    function startListening(cb) {\r\n        eventCb = cb;\r\n\r\n        Object.keys(events).forEach(function (event) {\r\n            var eventConfig = events[event];\r\n            window.addEventListener(event, onEvent, true);\r\n        });\r\n\r\n        window.addEventListener('mousemove', onSelectingMouseOver, true);\r\n        window.addEventListener('mousedown', onSelectingMouseDown, true);\r\n        window.addEventListener('mouseup', onSelectingMouseUp, true);\r\n        window.addEventListener('click', onSelectingClick, true);\r\n    }\r\n\r\n    function toggleRecording(toStart) {\r\n        recording = toStart;\r\n    }\r\n\r\n    function setSelectingType(type) {\r\n        selectingType = recording && type || null;\r\n        if (!selectingType) {\r\n            hideSelectingOverlay();\r\n        }\r\n    }\r\n\r\n    function setUpdateStateHandler(handler) {\r\n        updateStateHandler = handler;\r\n    }\r\n\r\n    function updateState(config) {\r\n        if (updateStateHandler) {\r\n            updateStateHandler(config);\r\n        }\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        var attrsConfig;\r\n        console.log('update config: ' + JSON.stringify(config));\r\n        if (config.selectorConfig && config.selectorConfig.attrsConfig) {\r\n            attrsConfig = config.selectorConfig.attrsConfig;\r\n            attrs = [];            \r\n            Object.keys(attrsConfig).forEach((key) => {\r\n                if (attrsConfig[key] && attrsConfig[key].enabled) {\r\n                    attrs.push(key);\r\n                }\r\n            });\r\n            \r\n            window.automEvents.cssPathBuilder.updateAttrsConfig(attrsConfig, attrs);\r\n        }\r\n    }\r\n\r\n    function isInRange(evt) {\r\n        var evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        return evtX >= 1 && evtY >= 1 && evtX <= (window.innerWidth - 1) && evtY <= (window.innerHeight - 1);\r\n    }\r\n\r\n    function onSelectingMouseOver(evt) {\r\n        var overLay,\r\n            target,\r\n            position,\r\n            targetBox,\r\n            size,\r\n            borderColor,\r\n            evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        overLay = getSelectingOverlay();        \r\n        if (selectingType === 'target') {\r\n            target = evt.target;\r\n            targetBox = target.getBoundingClientRect();\r\n            position = getPosition(target);\r\n            size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            }\r\n            \r\n            overLay.style.border = '2px solid #FF5733';\r\n            overLay.style.position  = 'absolute';\r\n        } else {\r\n            if (isMouseDown && regionStart){\r\n                size = {\r\n                    x: Math.min(regionStart.x, evtX) - 1,\r\n                    y: Math.min(regionStart.y, evtY) - 1,\r\n                    width: Math.abs(regionStart.x - evtX) + 2,\r\n                    height: Math.abs(regionStart.y - evtY) + 2\r\n                }\r\n            } else {\r\n                size = {\r\n                    x: evtX - 1,\r\n                    y: evtY - 1,\r\n                    width: 2,\r\n                    height: 2\r\n                }\r\n            }\r\n            \r\n            overLay.style.position  = 'fixed';\r\n            overLay.style.borderTop = size.y + 'px solid';\r\n            overLay.style.borderLeft = size.x + 'px solid';\r\n            overLay.style.borderRight = (window.innerWidth - size.x - size.width) + 'px solid';            \r\n            overLay.style.borderBottom = (window.innerHeight - size.y - size.height) + 'px solid';\r\n            overLay.style.borderColor = 'rgba(0, 0, 0, 0.7)';\r\n\r\n            size.x = document.body.scrollLeft;\r\n            size.y = document.body.scrollTop;\r\n        }\r\n\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n    }\r\n\r\n    function onSelectingMouseDown(evt) {\r\n        var overLay,\r\n            eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        if (selectingType === 'target') {\r\n            hideSelectingOverlay();\r\n            eventMessage = getVerifyTargetMessage(evt);\r\n            if (eventMessage) {\r\n                sendEventMessage({\r\n                    target: evt.target,\r\n                    message: eventMessage\r\n                });\r\n            }\r\n            updateState({key: 'selectingType', value: null});                \r\n        } else {\r\n            isMouseDown = true;\r\n            regionStart = {x: evt.clientX, y: evt.clientY};\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    function onSelectingMouseUp(evt) {\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        if (Math.abs(regionStart.x - evt.clientX) > 2 && Math.abs(regionStart.y - evt.clientY) > 2) {\r\n            sendEventMessage({\r\n                message: {\r\n                    type: 'screenshot',\r\n                    x: Math.min(regionStart.x, evt.clientX) - 1,\r\n                    y: Math.min(regionStart.y, evt.clientY) - 1,                    \r\n                    width: Math.abs(regionStart.x - evt.clientX) + 2,\r\n                    height: Math.abs(regionStart.y - evt.clientY) + 2\r\n                }\r\n            });\r\n        }\r\n\r\n        isMouseDown = false;\r\n        regionStart = null;\r\n    }\r\n\r\n    function onSelectingClick(evt) {\r\n        if (!selectingType) {\r\n            return;\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        hideSelectingOverlay();\r\n        selectingType = null;\r\n        updateState({key: 'selectingType', value: null});             \r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        var target = document.querySelector(cssPath);\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        var overLay = getSelectingOverlay();\r\n        var targetBox = target.getBoundingClientRect();\r\n        var position = getPosition(target);\r\n        var size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            };\r\n            \r\n        overLay.style.border = '2px solid #FF5733';\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n\r\n        setTimeout(() => {\r\n            hideSelectingOverlay();\r\n            selectingType = null;\r\n            updateState({key: 'selectingType', value: null}); \r\n        }, 2000);  \r\n    }\r\n\r\n    function hideSelectingOverlay() {\r\n        var overLay = getSelectingOverlay();\r\n        overLay.style.display = 'none';\r\n    }\r\n\r\n    function getSelectingOverlay() {\r\n        var el;\r\n\r\n        if (!selectTargetOverlay) {\r\n            el = window.document.createElement('div');\r\n            el.id = 'autom-select-target-overlay';\r\n            el.style.display = 'none';\r\n            el.style.position = 'absolute';\r\n            el.style.width = '100px';\r\n            el.style.border = '2px solid #FF5733';\r\n            el.style.height = '100px';\r\n            el.style.background = 'transparent';\r\n            el.style['pointer-events'] = 'none';\r\n            el.style['z-index'] = 100000;\r\n            el.style['box-sizing'] = 'content-box';\r\n            document.body.appendChild(el);\r\n            selectTargetOverlay = el;\r\n        }\r\n\r\n        return selectTargetOverlay;\r\n    }\r\n\r\n    function onEvent(evt) {\r\n        var eventMessage;\r\n\r\n        if (!recording || !eventCb || selectingType) {\r\n            return;\r\n        }\r\n\r\n        console.log(evt.type);\r\n        eventMessage = getEventMessage(evt);\r\n        if (eventMessage) {\r\n            sendEventMessage({\r\n                target: evt.target,\r\n                message: eventMessage\r\n            });\r\n        }\r\n    }\r\n\r\n    function sendEventMessage (eventMessage) {        \r\n        eventCb(eventMessage.message);\r\n    } \r\n\r\n    function getVerifyTargetMessage(evt) {\r\n        var type = 'verify',\r\n            target = getEventTarget(evt.target, true);\r\n\r\n        return {\r\n            type: type,\r\n            timeDiff: getTimeDiff(),\r\n            target: target\r\n        };\r\n    }\r\n\r\n    function getEventMessage(evt) {\r\n        var type = evt.type,\r\n            message = { type: type },\r\n            eventConfig = events[type],\r\n            target = getEventTarget(evt.target);\r\n\r\n        if (eventConfig) {\r\n            if (eventConfig.condition && !eventConfig.condition(evt)) {\r\n                return;\r\n            }\r\n\r\n            eventConfig.props.forEach(function (prop) {\r\n                var isPropFunc = prop.name && prop.fn,\r\n                    propName = isPropFunc ? prop.name : prop,\r\n                    propValue = isPropFunc ? prop.fn(evt) : evt[prop];\r\n\r\n                if (propValue !== undefined) {\r\n                    message[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (target) {\r\n            message.target = target;\r\n        }\r\n\r\n        message.timeDiff = getTimeDiff();\r\n        return message;\r\n    }\r\n\r\n    function getTimeDiff() {\r\n        var diff = 0;\r\n\r\n        if (!previousTime) {\r\n            previousTime = new Date().getTime();\r\n        } else {\r\n            diff = new Date().getTime() - previousTime;\r\n            previousTime += diff;\r\n        }\r\n\r\n        return diff;\r\n    }\r\n\r\n    function getEventTarget(target, includeText) {\r\n        var props = attrs.concat(['textContent', 'value']),\r\n            eventTarget = {};\r\n\r\n        if (!target) {\r\n            return null;\r\n        }\r\n\r\n        if (target === document) {\r\n            eventTarget.cssPath = 'body';\r\n            return eventTarget;\r\n        }\r\n\r\n        props.forEach(function (prop) {\r\n            addProp(target, prop, eventTarget);\r\n        });\r\n\r\n        if (eventTarget.textContent) {\r\n            eventTarget.textContent = eventTarget.textContent.replace(/\\r|\\n/g, '').substring(0, 100);\r\n        }\r\n\r\n        eventTarget.position = getPosition(target);\r\n        eventTarget.cssPath = window.automEvents.cssPathBuilder.build(target);\r\n\r\n        return eventTarget;\r\n    }\r\n\r\n    function addProp(source, key, dest) {\r\n        var value = source[key];\r\n        if (value && value.length) {\r\n            dest[key] = value;\r\n        }\r\n    }\r\n\r\n   \r\n    function getPosition(el) {\r\n        var elPosition = el.getBoundingClientRect && el.getBoundingClientRect();\r\n\r\n        return !elPosition ? { x: 0, y: 0 } : {\r\n            x: elPosition.left + window.scrollX,\r\n            y: elPosition.top + window.scrollY,\r\n            width: elPosition.width,\r\n            height: elPosition.height\r\n        }\r\n    }\r\n\r\n    eventModule = {\r\n        events: events,\r\n        startListening: startListening,\r\n        toggleRecording: toggleRecording,\r\n        setSelectingType: setSelectingType,\r\n        highlightElement: highlightElement,\r\n        updateConfig: updateConfig,\r\n        setUpdateStateHandler: setUpdateStateHandler\r\n    }\r\n\r\n    window.automEvents = Object.assign(window.automEvents || {}, eventModule);\r\n})();"],"sourceRoot":""}