{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./content/cssPathBuilder.js","webpack:///./content/eventConfig.js","webpack:///./content/events.js","webpack:///./content/content.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","attrsConfig","attrs","attrBuilderMap","id","target","cssPath","attrConfig","parent","matchValues","matches","length","tagName","classList","Array","slice","forEach","css","isUniqueSelector","buildCssPath","pathBuilder","attr","attrValue","len","config","values","includeRegex","excludeRegex","resultMap","include","exclude","RegExp","test","keys","window","document","querySelectorAll","cssPathBuilder","updateAttrsConfig","newConfig","newAttrs","builderCssPath","els","nth","uniqueParent","isUnique","currentTarget","currentCssPath","node","parentNode","getUniqueParent","indexOf","automEvents","isTextInput","events","toUpperCase","mouseenter","condition","evt","dblclick","props","clientX","clientY","detail","click","keydown","keyCode","keypress","keyup","scroll","fn","noParent","parentElement","left","pageXOffset","scrollLeft","top","pageYOffset","scrollTop","contextmenu","eventConfig","eventCb","recording","selectTargetOverlay","regionStart","eventModule","previousTime","updateStateHandler","selectingType","isMouseDown","updateState","isInRange","evtX","evtY","innerWidth","innerHeight","onSelectingMouseOver","overLay","position","targetBox","size","getSelectingOverlay","getBoundingClientRect","x","getPosition","y","width","height","style","border","Math","min","abs","borderTop","borderLeft","borderRight","borderBottom","borderColor","body","display","onSelectingMouseDown","eventMessage","hideSelectingOverlay","getEventTarget","type","timeDiff","getTimeDiff","getVerifyTargetMessage","sendEventMessage","message","stopPropagation","preventDefault","onSelectingMouseUp","onSelectingClick","el","createElement","background","appendChild","onEvent","console","log","prop","isPropFunc","propName","propValue","undefined","getEventMessage","diff","Date","getTime","includeText","concat","eventTarget","dest","textContent","replace","substring","elPosition","scrollX","scrollY","startListening","cb","event","addEventListener","toggleRecording","toStart","setSelectingType","highlightElement","querySelector","setTimeout","updateConfig","JSON","stringify","selectorConfig","enabled","push","setUpdateStateHandler","handler","assign","channel","state","actions","start","location","reload","stop","disconnect","selecttarget","highlight","updateconfig","updatestate","screenshot","isPartialScreenshot","onUnLoad","postMessage","stopRecording","handlChannelMessage","eventCallBack","sendMessage","chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","success","response","isRecording","connect","self","notify","sizes","url","href"],"mappings":"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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 290);\n","(function () {\r\n    var attrsConfig,\r\n        attrs,\r\n        attrBuilderMap = {\r\n            'id': buildIdPath,\r\n            'tagName': buildTagPath,\r\n            'classList': buildClassPath\r\n        };\r\n\r\n    function updateAttrsConfig(newConfig, newAttrs) {\r\n        attrsConfig = newConfig;\r\n        attrs = newAttrs;\r\n    }\r\n\r\n    function builderCssPath(target) {\r\n        var currentTarget = target,\r\n            currentCssPath = buildCssPath(currentTarget),\r\n            cssPath,\r\n            els,\r\n            nth,\r\n            parent,\r\n            uniqueParent,\r\n            isUnique;\r\n\r\n        if (isUniqueSelector(currentCssPath)) {\r\n            return currentCssPath;\r\n        }\r\n\r\n        parent = currentTarget.parentNode;      \r\n        uniqueParent = getUniqueParent(parent);\r\n        while (!isUnique && parent !== null) {\r\n            els = parent.querySelectorAll(currentCssPath);\r\n            if (els.length > 1) {\r\n                nth = Array.prototype.indexOf.call(els, currentTarget);\r\n                if (nth > -1) {\r\n                    currentCssPath += ':nth-child(' + (nth + 1) + ')';\r\n                }\r\n            }\r\n            \r\n            if (currentCssPath !== cssPath) {\r\n                cssPath = cssPath ? currentCssPath + ' ' + cssPath : currentCssPath;\r\n            }\r\n            currentTarget = parent;            \r\n            currentCssPath = buildCssPath(currentTarget);\r\n            isUnique = isUniqueSelector(cssPath, uniqueParent.node);\r\n            parent = currentTarget.parentNode;\r\n        }\r\n\r\n        return uniqueParent ? uniqueParent.cssPath + ' ' + cssPath : cssPath;\r\n    }\r\n    \r\n    function getUniqueParent(node) {\r\n        var parent = node.parentNode,\r\n            cssPath = buildCssPath(node),\r\n            isUnique = isUniqueSelector(cssPath);\r\n        \r\n        while(!isUnique && parent !== null) {\r\n            cssPath = buildCssPath(parent);\r\n            isUnique = isUniqueSelector(cssPath);\r\n            parent = parent.parentNode;\r\n        }\r\n\r\n        return {\r\n            node: node,\r\n            cssPath: cssPath\r\n        };\r\n    }\r\n\r\n    function buildCssPath(target, parent) {\r\n        var cssPath = '',\r\n            pathBuilder,\r\n            attr,\r\n            attrConfig,\r\n            attrValue,\r\n            matchValues,\r\n            i,\r\n            len = attrs.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            attr = attrs[i];\r\n            attrValue = target[attr];\r\n            if (!attrValue) {\r\n                continue;\r\n            }\r\n            \r\n            attrConfig = attrsConfig[attr];\r\n            pathBuilder = attrBuilderMap[attr];\r\n            if (pathBuilder) {\r\n                cssPath = pathBuilder(target, cssPath, attrConfig, parent);    \r\n            } else {\r\n                matchValues = matches(attrConfig, [attrValue]);\r\n                if (matchValues.length) {\r\n                    cssPath += '[' + attr + '=\"' + matchValues[0] +'\"]';\r\n                }\r\n            }\r\n\r\n            if (isUniqueSelector(cssPath, parent)) {\r\n                return cssPath;\r\n            }\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function matches(config, values) {\r\n        var resultMap = {},\r\n            includeRegex,\r\n            excludeRegex;\r\n\r\n        if (!config) {\r\n            return [];\r\n        }\r\n\r\n        if (!config.include && !config.exclude) {\r\n            return values;\r\n        }\r\n\r\n        includeRegex = config.include ? new RegExp(config.include) : null;\r\n        excludeRegex = config.exclude ? new RegExp(config.exclude) : null;\r\n        values.forEach(function(value) {\r\n            if (value && (!includeRegex || includeRegex.test(value)) && (!excludeRegex || !excludeRegex.test(value))) {\r\n                resultMap[value] = 1;\r\n            }\r\n        });\r\n\r\n        return Object.keys(resultMap);\r\n    }\r\n\r\n    function buildIdPath(target, cssPath, attrConfig, parent) {\r\n        var id = target.id,\r\n            matchValues = matches(attrConfig, [id]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return cssPath + '#' + matchValues[0];\r\n    }\r\n\r\n    function buildTagPath(target, cssPath, attrConfig, parent) {\r\n        var tagName = target.tagName,\r\n            matchValues = matches(attrConfig, [tagName]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return matchValues[0] + cssPath;\r\n    }\r\n    \r\n    function buildClassPath (target, cssPath, attrConfig, parent) {\r\n        var matchValues = matches(attrConfig, Array.prototype.slice.call(target.classList));\r\n        if (!matchValues.length) {\r\n            return cssPath;            \r\n        }\r\n\r\n        matchValues.forEach((css) => {\r\n            cssPath += '.' + css;\r\n            if (isUniqueSelector(cssPath, parent)) {\r\n                return cssPath;\r\n            }\r\n        });\r\n\r\n        return cssPath;\r\n    }    \r\n\r\n    function isUniqueSelector(cssPath, parent) {\r\n        if (!cssPath) {\r\n            return false;\r\n        }\r\n\r\n        parent = parent || window.document;\r\n        return parent.querySelectorAll(cssPath).length === 1;\r\n    }\r\n\r\n    var cssPathBuilder = {\r\n        updateAttrsConfig: updateAttrsConfig,\r\n        builderCssPath: builderCssPath\r\n    };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.cssPathBuilder = cssPathBuilder;\r\n})();","(function () {\r\n    var isTextInput = function (target) {\r\n        var tagName = target && target.tagName && target.tagName.toUpperCase();\r\n        if (!tagName) {\r\n            return false;\r\n        }\r\n        return tagName === 'TEXTAREA' || tagName === 'INPUT';\r\n    },\r\n        events = {\r\n            mouseenter: {\r\n                condition: function (evt) {\r\n                    return false;\r\n                }\r\n            },\r\n            dblclick: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0);\r\n                }\r\n            },\r\n            click: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which'],\r\n                condition: function (evt) {\r\n                    return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0 && evt.target && evt.target.tagName.toUpperCase() !== 'SELECT');\r\n                }\r\n            },\r\n            keydown: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return evt.keyCode === 8 || evt.keyCode === 46 || evt.keyCode === 13;\r\n                }\r\n            },\r\n            keypress: {\r\n                props: ['key', 'keyCode', , 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return !isTextInput(evt.target);\r\n                }\r\n            },\r\n            keyup: {\r\n                props: ['key', 'keyCode', 'char', 'charCode', 'location', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey'],\r\n                condition: function (evt) {\r\n                    return isTextInput(evt.target) && evt.keyCode !== 13;\r\n                }\r\n            },\r\n            scroll: {\r\n                props: ['detail', {\r\n                    name: 'scroll', fn: function scroll(evt) {\r\n                        var target = evt.target,\r\n                            noParent = !target.parentElement,\r\n                            scrollLeft = !noParent ? target.scrollLeft : window.pageXOffset,\r\n                            scrollTop = !noParent ? target.scrollTop : window.pageYOffset;\r\n\r\n                        return { left: scrollLeft, top: scrollTop };\r\n                    }\r\n                }]\r\n            },\r\n            contextmenu: {\r\n                props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            }\r\n            // wheel: {\r\n            //     props: ['deltaX ', 'deltaY', 'deltaZ', 'deltaMode', 'altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n            // mousedown: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mousemove: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // },\r\n            // mouseup: {\r\n            //     props: ['altKey', 'button', 'buttons', 'clientX', 'clientY', 'ctrlKey', 'shiftKey', 'which']\r\n            // }\r\n        };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.eventConfig = events;\r\n})();","(function () {\r\n    var automEvents = window.automEvents,\r\n        events = automEvents.eventConfig,\r\n        attrs,\r\n        eventCb,\r\n        recording,\r\n        selectingType = null,\r\n        selectTargetOverlay,\r\n        regionStart,\r\n        isMouseDown = false,\r\n        eventModule,\r\n        previousTime,\r\n        updateStateHandler;\r\n\r\n    function startListening(cb) {\r\n        eventCb = cb;\r\n\r\n        Object.keys(events).forEach(function (event) {\r\n            var eventConfig = events[event];\r\n            window.addEventListener(event, onEvent, true);\r\n        });\r\n\r\n        window.addEventListener('mousemove', onSelectingMouseOver, true);\r\n        window.addEventListener('mousedown', onSelectingMouseDown, true);\r\n        window.addEventListener('mouseup', onSelectingMouseUp, true);\r\n        window.addEventListener('click', onSelectingClick, true);\r\n    }\r\n\r\n    function toggleRecording(toStart) {\r\n        recording = toStart;\r\n    }\r\n\r\n    function setSelectingType(type) {\r\n        selectingType = recording && type || null;\r\n        if (!selectingType) {\r\n            hideSelectingOverlay();\r\n        }\r\n    }\r\n\r\n    function setUpdateStateHandler(handler) {\r\n        updateStateHandler = handler;\r\n    }\r\n\r\n    function updateState(config) {\r\n        if (updateStateHandler) {\r\n            updateStateHandler(config);\r\n        }\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        var attrsConfig;\r\n        console.log('update config: ' + JSON.stringify(config));\r\n        if (config.selectorConfig && config.selectorConfig.attrsConfig) {\r\n            attrsConfig = config.selectorConfig.attrsConfig;\r\n            attrs = [];            \r\n            Object.keys(attrsConfig).forEach((key) => {\r\n                if (attrsConfig[key] && attrsConfig[key].enabled) {\r\n                    attrs.push(key);\r\n                }\r\n            });\r\n            \r\n            window.automEvents.cssPathBuilder.updateAttrsConfig(attrsConfig, attrs);\r\n        }\r\n    }\r\n\r\n    function isInRange(evt) {\r\n        var evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        return evtX >= 1 && evtY >= 1 && evtX <= (window.innerWidth - 1) && evtY <= (window.innerHeight - 1);\r\n    }\r\n\r\n    function onSelectingMouseOver(evt) {\r\n        var overLay,\r\n            target,\r\n            position,\r\n            targetBox,\r\n            size,\r\n            borderColor,\r\n            evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        overLay = getSelectingOverlay();        \r\n        if (selectingType === 'target') {\r\n            target = evt.target;\r\n            targetBox = target.getBoundingClientRect();\r\n            position = getPosition(target);\r\n            size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            }\r\n            \r\n            overLay.style.border = '2px solid #FF5733';\r\n            overLay.style.position  = 'absolute';\r\n        } else {\r\n            if (isMouseDown && regionStart){\r\n                size = {\r\n                    x: Math.min(regionStart.x, evtX) - 1,\r\n                    y: Math.min(regionStart.y, evtY) - 1,\r\n                    width: Math.abs(regionStart.x - evtX) + 2,\r\n                    height: Math.abs(regionStart.y - evtY) + 2\r\n                }\r\n            } else {\r\n                size = {\r\n                    x: evtX - 1,\r\n                    y: evtY - 1,\r\n                    width: 2,\r\n                    height: 2\r\n                }\r\n            }\r\n            \r\n            overLay.style.position  = 'fixed';\r\n            overLay.style.borderTop = size.y + 'px solid';\r\n            overLay.style.borderLeft = size.x + 'px solid';\r\n            overLay.style.borderRight = (window.innerWidth - size.x - size.width) + 'px solid';            \r\n            overLay.style.borderBottom = (window.innerHeight - size.y - size.height) + 'px solid';\r\n            overLay.style.borderColor = 'rgba(0, 0, 0, 0.7)';\r\n\r\n            size.x = document.body.scrollLeft;\r\n            size.y = document.body.scrollTop;\r\n        }\r\n\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n    }\r\n\r\n    function onSelectingMouseDown(evt) {\r\n        var overLay,\r\n            eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        if (selectingType === 'target') {\r\n            hideSelectingOverlay();\r\n            eventMessage = getVerifyTargetMessage(evt);\r\n            if (eventMessage) {\r\n                sendEventMessage({\r\n                    target: evt.target,\r\n                    message: eventMessage\r\n                });\r\n            }\r\n            updateState({key: 'selectingType', value: null});                \r\n        } else {\r\n            isMouseDown = true;\r\n            regionStart = {x: evt.clientX, y: evt.clientY};\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    function onSelectingMouseUp(evt) {\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        } \r\n\r\n        if (Math.abs(regionStart.x - evt.clientX) > 2 && Math.abs(regionStart.y - evt.clientY) > 2) {\r\n            sendEventMessage({\r\n                message: {\r\n                    type: 'screenshot',\r\n                    x: Math.min(regionStart.x, evt.clientX) - 1,\r\n                    y: Math.min(regionStart.y, evt.clientY) - 1,                    \r\n                    width: Math.abs(regionStart.x - evt.clientX) + 2,\r\n                    height: Math.abs(regionStart.y - evt.clientY) + 2\r\n                }\r\n            });\r\n        }\r\n\r\n        isMouseDown = false;\r\n        regionStart = null;\r\n    }\r\n\r\n    function onSelectingClick(evt) {\r\n        if (!selectingType) {\r\n            return;\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        hideSelectingOverlay();\r\n        selectingType = null;\r\n        updateState({key: 'selectingType', value: null});             \r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        var target = document.querySelector(cssPath);\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        var overLay = getSelectingOverlay();\r\n        var targetBox = target.getBoundingClientRect();\r\n        var position = getPosition(target);\r\n        var size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            };\r\n            \r\n        overLay.style.border = '2px solid #FF5733';\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n\r\n        setTimeout(() => {\r\n            hideSelectingOverlay();\r\n            selectingType = null;\r\n            updateState({key: 'selectingType', value: null}); \r\n        }, 2000);  \r\n    }\r\n\r\n    function hideSelectingOverlay() {\r\n        var overLay = getSelectingOverlay();\r\n        overLay.style.display = 'none';\r\n    }\r\n\r\n    function getSelectingOverlay() {\r\n        var el;\r\n\r\n        if (!selectTargetOverlay) {\r\n            el = window.document.createElement('div');\r\n            el.id = 'autom-select-target-overlay';\r\n            el.style.display = 'none';\r\n            el.style.position = 'absolute';\r\n            el.style.width = '100px';\r\n            el.style.border = '2px solid #FF5733';\r\n            el.style.height = '100px';\r\n            el.style.background = 'transparent';\r\n            el.style['pointer-events'] = 'none';\r\n            el.style['z-index'] = 100000;\r\n            el.style['box-sizing'] = 'content-box';\r\n            document.body.appendChild(el);\r\n            selectTargetOverlay = el;\r\n        }\r\n\r\n        return selectTargetOverlay;\r\n    }\r\n\r\n    function onEvent(evt) {\r\n        var eventMessage;\r\n\r\n        if (!recording || !eventCb || selectingType) {\r\n            return;\r\n        }\r\n\r\n        console.log(evt.type);\r\n        eventMessage = getEventMessage(evt);\r\n        if (eventMessage) {\r\n            sendEventMessage({\r\n                target: evt.target,\r\n                message: eventMessage\r\n            });\r\n        }\r\n    }\r\n\r\n    function sendEventMessage (eventMessage) {        \r\n        eventCb(eventMessage.message);\r\n    } \r\n\r\n    function getVerifyTargetMessage(evt) {\r\n        var type = 'verify',\r\n            target = getEventTarget(evt.target, true);\r\n\r\n        return {\r\n            type: type,\r\n            timeDiff: getTimeDiff(),\r\n            target: target\r\n        };\r\n    }\r\n\r\n    function getEventMessage(evt) {\r\n        var type = evt.type,\r\n            message = { type: type },\r\n            eventConfig = events[type],\r\n            target = getEventTarget(evt.target);\r\n\r\n        if (eventConfig) {\r\n            if (eventConfig.condition && !eventConfig.condition(evt)) {\r\n                return;\r\n            }\r\n\r\n            eventConfig.props.forEach(function (prop) {\r\n                var isPropFunc = prop.name && prop.fn,\r\n                    propName = isPropFunc ? prop.name : prop,\r\n                    propValue = isPropFunc ? prop.fn(evt) : evt[prop];\r\n\r\n                if (propValue !== undefined) {\r\n                    message[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (target) {\r\n            message.target = target;\r\n        }\r\n\r\n        message.timeDiff = getTimeDiff();\r\n        return message;\r\n    }\r\n\r\n    function getTimeDiff() {\r\n        var diff = 0;\r\n\r\n        if (!previousTime) {\r\n            previousTime = new Date().getTime();\r\n        } else {\r\n            diff = new Date().getTime() - previousTime;\r\n            previousTime += diff;\r\n        }\r\n\r\n        return diff;\r\n    }\r\n\r\n    function getEventTarget(target, includeText) {\r\n        var props = attrs.concat(['textContent', 'value']),\r\n            eventTarget = {};\r\n\r\n        if (!target) {\r\n            return null;\r\n        }\r\n\r\n        if (target === document) {\r\n            eventTarget.cssPath = 'body';\r\n            return eventTarget;\r\n        }\r\n\r\n        props.forEach(function (prop) {\r\n            addProp(target, prop, eventTarget);\r\n        });\r\n\r\n        if (eventTarget.textContent) {\r\n            eventTarget.textContent = eventTarget.textContent.replace(/\\r|\\n/g, '').substring(0, 100);\r\n        }\r\n\r\n        eventTarget.position = getPosition(target);\r\n        eventTarget.cssPath = window.automEvents.cssPathBuilder.builderCssPath(target);\r\n\r\n        return eventTarget;\r\n    }\r\n\r\n    function addProp(source, key, dest) {\r\n        var value = source[key];\r\n        if (value && value.length) {\r\n            dest[key] = value;\r\n        }\r\n    }\r\n\r\n   \r\n    function getPosition(el) {\r\n        var elPosition = el.getBoundingClientRect && el.getBoundingClientRect();\r\n\r\n        return !elPosition ? { x: 0, y: 0 } : {\r\n            x: elPosition.left + window.scrollX,\r\n            y: elPosition.top + window.scrollY,\r\n            width: elPosition.width,\r\n            height: elPosition.height\r\n        }\r\n    }\r\n\r\n    eventModule = {\r\n        events: events,\r\n        startListening: startListening,\r\n        toggleRecording: toggleRecording,\r\n        setSelectingType: setSelectingType,\r\n        highlightElement: highlightElement,\r\n        updateConfig: updateConfig,\r\n        setUpdateStateHandler: setUpdateStateHandler\r\n    }\r\n\r\n    window.automEvents = Object.assign(window.automEvents || {}, eventModule);\r\n})();","(function () {\r\n    var state = {\r\n            recording: false\r\n        },\r\n        actions = {\r\n            start: startAction,\r\n            stop: stopAction,\r\n            selecttarget: selectTargetAction,\r\n            highlight: highlightElement,\r\n            updateconfig: updateConfig,\r\n            updatestate: updateState,\r\n            screenshot: screenshot\r\n        },\r\n        channel;\r\n\r\n    chrome.runtime.onMessage.addListener(\r\n        function (request, sender, sendResponse) {\r\n            var action = actions[request.action],\r\n                success = false;\r\n\r\n            if (action) {\r\n                action(request.value);\r\n                success = true;\r\n            }\r\n            sendResponse({ success: true });\r\n        });\r\n\r\n    function startAction() {\r\n        window.location.reload();\r\n    }\r\n\r\n    function stopAction() {\r\n        state.recording = false;\r\n        window.automEvents.toggleRecording(state.recording);\r\n        closeChannel();\r\n    }\r\n\r\n    function updateState(config) {\r\n        state[config.key] = config.value;\r\n        if(config.key === 'isPartialScreenshot' && !config.value && state.selectingType === 'region') {\r\n            screenshot();\r\n        }\r\n    }\r\n\r\n    function screenshot() {\r\n        state.selectingType = state.isPartialScreenshot && state.selectingType !== 'region' ? 'region' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function selectTargetAction() {\r\n        state.selectingType = state.selectingType !== 'target' ? 'target' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        window.automEvents.highlightElement(cssPath);\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        window.automEvents.updateConfig(config);\r\n    }\r\n\r\n    function start() {\r\n        window.automEvents.startListening(eventCallBack);\r\n        window.automEvents.setUpdateStateHandler(updateState);\r\n        window.addEventListener('unload', onUnLoad);\r\n\r\n        chrome.runtime.sendMessage({ action: 'isRecording' }, function (response) {\r\n            state.recording = response && response.isRecording;\r\n            if (state.recording) {\r\n                window.automEvents.toggleRecording(state.recording);\r\n                createChannel();\r\n\r\n                if (window.self === window.top) {\r\n                    sendMessage({\r\n                        notify: 'load'\r\n                    });\r\n                    sendMessage({\r\n                        type: 'setsize',\r\n                        sizes: {\r\n                            width: window.innerWidth,\r\n                            height: window.innerHeight\r\n                        }\r\n                    });\r\n                    sendMessage({\r\n                        type: 'url',\r\n                        url: window.location.href\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function onUnLoad() {\r\n        if (!state.recording) {\r\n            return true;\r\n        }\r\n\r\n        channel.postMessage({ stopRecording: true });\r\n    }\r\n\r\n    function createChannel() {\r\n        channel = chrome.runtime.connect({ name: \"automrecoder\" });\r\n\r\n        channel.onMessage.addListener(handlChannelMessage);\r\n    }\r\n\r\n    function handlChannelMessage(message) {\r\n\r\n    }\r\n\r\n    function closeChannel() {\r\n        channel.disconnect();\r\n    }\r\n\r\n    function eventCallBack(eventMessage) {\r\n        sendMessage(eventMessage);\r\n    }\r\n\r\n    function sendMessage(message) {\r\n        if (!state.recording) {\r\n            return;\r\n        }\r\n\r\n        channel.postMessage(message);\r\n    }\r\n\r\n    start();\r\n})()"],"sourceRoot":""}