{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./content/cssPathBuilder.js","webpack:///./content/eventConfig.js","webpack:///./content/events.js","webpack:///./content/content.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","attrsConfig","attrs","attrBuilderMap","id","target","attr","cssPath","parent","matchValues","matches","length","tagName","classList","Array","slice","forEach","css","isUniqueSelector","buildCssPath","len","buildAttrPath","attrValue","window","document","querySelectorAll","config","values","includeRegex","excludeRegex","resultMap","include","exclude","RegExp","test","keys","cssPathBuilder","updateAttrsConfig","newConfig","newAttrs","build","nth","uniqueParent","isUnique","currentTarget","currentCssPath","node","parentNode","getUniqueParent","indexOf","children","automEvents","events","mouseenter","condition","evt","dblclick","clientX","clientY","detail","click","toUpperCase","keydown","props","fn","keyCode","keypress","isTextInput","keyup","scroll","parentElement","scrollLeft","pageXOffset","scrollTop","pageYOffset","contextmenu","eventConfig","eventCb","recording","selectTargetOverlay","eventModule","updateStateHandler","selectingType","regionStart","isMouseDown","updateState","isInRange","evtX","evtY","innerWidth","innerHeight","onSelectingMouseOver","overLay","position","targetBox","size","getSelectingOverlay","getBoundingClientRect","x","getPosition","y","width","height","style","border","Math","min","abs","borderTop","borderLeft","borderRight","borderBottom","borderColor","body","top","left","display","onSelectingMouseDown","eventMessage","hideSelectingOverlay","type","textContent","getVerifyTargetMessage","sendEventMessage","message","stopPropagation","preventDefault","onSelectingMouseUp","onSelectingClick","el","createElement","background","appendChild","onEvent","console","log","prop","isPropFunc","propName","propValue","undefined","getEventMessage","elPosition","scrollX","scrollY","startListening","cb","event","addEventListener","toggleRecording","toStart","setSelectingType","highlightElement","querySelector","setTimeout","updateConfig","JSON","stringify","selectorConfig","enabled","push","setUpdateStateHandler","handler","assign","channel","state","actions","start","location","reload","stop","disconnect","selecttarget","highlight","updateconfig","updatestate","screenshot","isPartialScreenshot","onUnLoad","postMessage","stopRecording","handlChannelMessage","eventCallBack","sendMessage","chrome","runtime","onMessage","addListener","request","sender","sendResponse","action","success","response","isRecording","connect","self","notify","href"],"mappings":"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","file":"content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 290);\n","(function () {\r\n    var attrsConfig,\r\n        attrs,\r\n        attrBuilderMap = {\r\n            'id': buildIdPath,\r\n            'tagName': buildTagPath,\r\n            'classList': buildClassPath\r\n        };\r\n\r\n    function updateAttrsConfig(newConfig, newAttrs) {\r\n        attrsConfig = newConfig;\r\n        attrs = newAttrs;\r\n    }\r\n\r\n    function build(target) {\r\n        var currentTarget = target,\r\n            currentCssPath = buildCssPath(currentTarget),\r\n            cssPath,\r\n            els,\r\n            nth,\r\n            parent,\r\n            uniqueParent,\r\n            isUnique;\r\n\r\n        if (isUniqueSelector(currentCssPath)) {\r\n            return currentCssPath;\r\n        }\r\n\r\n        parent = currentTarget.parentNode;      \r\n        uniqueParent = getUniqueParent(parent);\r\n        while (!isUnique && parent !== null) {\r\n            els = parent.querySelectorAll(currentCssPath);\r\n            if (els.length > 1) {\r\n                nth = Array.prototype.indexOf.call(parent.children, currentTarget);\r\n                if (nth > -1) {\r\n                    currentCssPath += ':nth-child(' + (nth + 1) + ')';\r\n                }\r\n            }\r\n            \r\n            if (currentCssPath !== cssPath) {\r\n                cssPath = cssPath ? currentCssPath + ' ' + cssPath : currentCssPath;\r\n            }\r\n            currentTarget = parent;            \r\n            currentCssPath = buildCssPath(currentTarget);\r\n            isUnique = isUniqueSelector(cssPath, uniqueParent.node);\r\n            parent = currentTarget.parentNode;\r\n        }\r\n\r\n        return uniqueParent ? uniqueParent.cssPath + ' ' + cssPath : cssPath;\r\n    }\r\n    \r\n    function getUniqueParent(node) {\r\n        var parent = node.parentNode,\r\n            cssPath = buildCssPath(node),\r\n            isUnique = isUniqueSelector(cssPath);\r\n        \r\n        while(!isUnique && parent !== null) {\r\n            cssPath = buildCssPath(parent);\r\n            isUnique = isUniqueSelector(cssPath);\r\n            node = parent;\r\n            parent = parent.parentNode;\r\n        }\r\n\r\n        return {\r\n            node: node,\r\n            cssPath: cssPath\r\n        };\r\n    }\r\n\r\n    function buildCssPath(target, parent) {\r\n        var cssPath = '',\r\n            pathBuilder,\r\n            attr,\r\n            i,\r\n            len = attrs.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            attr = attrs[i];\r\n            if (!target[attr]) {\r\n                continue;\r\n            }\r\n            \r\n            pathBuilder = attrBuilderMap[attr] || buildAttrPath;\r\n            cssPath = pathBuilder(target, attr, cssPath, parent);\r\n\r\n            if (isUniqueSelector(cssPath, parent)) {\r\n                return cssPath;\r\n            }\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function buildIdPath(target, attr, cssPath, parent) {\r\n        var id = target.id,            \r\n            attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, [id]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return cssPath + '#' + matchValues[0];\r\n    }\r\n\r\n    function buildTagPath(target, attr, cssPath, parent) {\r\n        var tagName = target.tagName,\r\n            attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, [tagName]);\r\n        if (!matchValues.length) {\r\n            return cssPath;\r\n        }\r\n\r\n        return matchValues[0] + cssPath;\r\n    }\r\n    \r\n    function buildClassPath (target, attr, cssPath, parent) {\r\n        var attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, Array.prototype.slice.call(target.classList));\r\n        if (!matchValues.length) {\r\n            return cssPath;            \r\n        }\r\n\r\n        matchValues.forEach((css) => {\r\n            cssPath += '.' + css;\r\n            if (isUniqueSelector(cssPath, parent)) {\r\n                return cssPath;\r\n            }\r\n        });\r\n\r\n        return cssPath;\r\n    }\r\n    \r\n    function buildAttrPath(target, attr, cssPath, parent) {\r\n        var attrValue = target[attr],\r\n            attrConfig = attrsConfig[attr],\r\n            matchValues = matches(attrConfig, [attrValue]);\r\n\r\n        if (matchValues.length) {\r\n            cssPath += '[' + attr + '=\"' + matchValues[0] +'\"]';\r\n        }\r\n\r\n        return cssPath;\r\n    }\r\n\r\n    function isUniqueSelector(cssPath, parent) {\r\n        if (!cssPath) {\r\n            return false;\r\n        }\r\n\r\n        parent = parent || window.document;\r\n        return parent.querySelectorAll(cssPath).length === 1;\r\n    }\r\n\r\n    function matches(config, values) {\r\n        var resultMap = {},\r\n            includeRegex,\r\n            excludeRegex;\r\n\r\n        if (!config) {\r\n            return [];\r\n        }\r\n\r\n        if (!config.include && !config.exclude) {\r\n            return values;\r\n        }\r\n\r\n        includeRegex = config.include ? new RegExp(config.include) : null;\r\n        excludeRegex = config.exclude ? new RegExp(config.exclude) : null;\r\n        values.forEach(function(value) {\r\n            if (value && (!includeRegex || includeRegex.test(value)) && (!excludeRegex || !excludeRegex.test(value))) {\r\n                resultMap[value] = 1;\r\n            }\r\n        });\r\n\r\n        return Object.keys(resultMap);\r\n    }\r\n\r\n    var cssPathBuilder = {\r\n        updateAttrsConfig: updateAttrsConfig,\r\n        build: build\r\n    };\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.cssPathBuilder = cssPathBuilder;\r\n})();","(function () {\r\n    var events = {\r\n        mouseenter: {\r\n            condition: function (evt) {\r\n                return false;\r\n            }\r\n        },\r\n        dblclick: {\r\n            condition: function (evt) {\r\n                return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0);\r\n            }\r\n        },\r\n        click: {\r\n            condition: function (evt) {\r\n                return !(evt.clientX === 0 && evt.clientY === 0 && evt.detail === 0 && evt.target && evt.target.tagName.toUpperCase() !== 'SELECT');\r\n            }\r\n        },\r\n        keydown: {\r\n            props: [{\r\n                name: 'value',\r\n                fn: function (evt) {\r\n                    return evt.keyCode;\r\n                }\r\n            }],\r\n            condition: function (evt) {\r\n                return evt.keyCode === 8 || evt.keyCode === 46 || evt.keyCode === 13;\r\n            }\r\n        },\r\n        keypress: {\r\n            props: [{\r\n                name: 'value',\r\n                fn: function (evt) {\r\n                    return evt.keyCode;\r\n                }\r\n            }],\r\n            condition: function (evt) {\r\n                return !isTextInput(evt.target);\r\n            }\r\n        },\r\n        keyup: {\r\n            props: [{\r\n                name: 'value',\r\n                fn: function (evt) {\r\n                    return evt.target.value;\r\n                }\r\n            }],\r\n            condition: function (evt) {\r\n                return isTextInput(evt.target) && evt.keyCode !== 13;\r\n            }\r\n        },\r\n        scroll: {\r\n            props: [{\r\n                name: 'left',\r\n                fn: function (evt) {\r\n                    return evt.target.parentElement ? evt.target.scrollLeft : window.pageXOffset;\r\n                }\r\n            }, {\r\n                name: 'top',\r\n                fn: function (evt) {\r\n                    return evt.target.parentElement ? evt.target.scrollTop : window.pageYOffset;\r\n                }\r\n            }]\r\n        },\r\n        contextmenu: {}\r\n    };\r\n\r\n    function isTextInput(target) {\r\n        var tagName = target && target.tagName && target.tagName.toUpperCase();\r\n        if (!tagName) {\r\n            return false;\r\n        }\r\n        return tagName === 'TEXTAREA' || tagName === 'INPUT';\r\n    }\r\n\r\n    window.automEvents = window.automEvents || {};\r\n    window.automEvents.eventConfig = events;\r\n})();","(function () {\r\n    var automEvents = window.automEvents,\r\n        events = automEvents.eventConfig,\r\n        attrs,\r\n        eventCb,\r\n        recording,\r\n        selectingType = null,\r\n        selectTargetOverlay,\r\n        regionStart = {},\r\n        isMouseDown = false,\r\n        eventModule,\r\n        updateStateHandler;\r\n\r\n    function startListening(cb) {\r\n        eventCb = cb;\r\n        Object.keys(events).forEach(function (event) {\r\n            window.addEventListener(event, onEvent, true);\r\n        });\r\n\r\n        window.addEventListener('mousemove', onSelectingMouseOver, true);\r\n        window.addEventListener('mousedown', onSelectingMouseDown, true);\r\n        window.addEventListener('mouseup', onSelectingMouseUp, true);\r\n        window.addEventListener('click', onSelectingClick, true);\r\n    }\r\n\r\n    function toggleRecording(toStart) {\r\n        recording = toStart;\r\n    }\r\n\r\n    function setSelectingType(type) {\r\n        selectingType = recording && type || null;\r\n        if (!selectingType) {\r\n            hideSelectingOverlay();\r\n        }\r\n    }\r\n\r\n    function setUpdateStateHandler(handler) {\r\n        updateStateHandler = handler;\r\n    }\r\n\r\n    function updateState(config) {\r\n        if (updateStateHandler) {\r\n            updateStateHandler(config);\r\n        }\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        var attrsConfig;\r\n        console.log('update config: ' + JSON.stringify(config));\r\n        if (config.selectorConfig && config.selectorConfig.attrsConfig) {\r\n            attrsConfig = config.selectorConfig.attrsConfig;\r\n            attrs = [];\r\n            Object.keys(attrsConfig).forEach((key) => {\r\n                if (attrsConfig[key] && attrsConfig[key].enabled) {\r\n                    attrs.push(key);\r\n                }\r\n            });\r\n\r\n            window.automEvents.cssPathBuilder.updateAttrsConfig(attrsConfig, attrs);\r\n        }\r\n    }\r\n\r\n    function isInRange(evt) {\r\n        var evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        return evtX >= 1 && evtY >= 1 && evtX <= (window.innerWidth - 1) && evtY <= (window.innerHeight - 1);\r\n    }\r\n\r\n    function onSelectingMouseOver(evt) {\r\n        var overLay,\r\n            target,\r\n            position,\r\n            targetBox,\r\n            size,\r\n            evtX = evt.clientX,\r\n            evtY = evt.clientY;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        overLay = getSelectingOverlay();\r\n        if (selectingType === 'target') {\r\n            target = evt.target;\r\n            targetBox = target.getBoundingClientRect();\r\n            position = getPosition(target);\r\n            size = {\r\n                x: position.x,\r\n                y: position.y,\r\n                width: targetBox.width,\r\n                height: targetBox.height\r\n            }\r\n\r\n            overLay.style.border = '2px solid #FF5733';\r\n            overLay.style.position = 'absolute';\r\n        } else {\r\n            if (isMouseDown && regionStart) {\r\n                size = {\r\n                    x: Math.min(regionStart.x, evtX) - 1,\r\n                    y: Math.min(regionStart.y, evtY) - 1,\r\n                    width: Math.abs(regionStart.x - evtX) + 2,\r\n                    height: Math.abs(regionStart.y - evtY) + 2\r\n                }\r\n            } else {\r\n                size = {\r\n                    x: evtX - 1,\r\n                    y: evtY - 1,\r\n                    width: 2,\r\n                    height: 2\r\n                }\r\n            }\r\n\r\n            overLay.style.position = 'fixed';\r\n            overLay.style.borderTop = size.y + 'px solid';\r\n            overLay.style.borderLeft = size.x + 'px solid';\r\n            overLay.style.borderRight = (window.innerWidth - size.x - size.width) + 'px solid';\r\n            overLay.style.borderBottom = (window.innerHeight - size.y - size.height) + 'px solid';\r\n            overLay.style.borderColor = 'rgba(0, 0, 0, 0.7)';\r\n\r\n            size.x = document.body.scrollLeft;\r\n            size.y = document.body.scrollTop;\r\n        }\r\n\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n    }\r\n\r\n    function onSelectingMouseDown(evt) {\r\n        var eventMessage;\r\n\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        if (selectingType === 'target') {\r\n            hideSelectingOverlay();\r\n            eventMessage = getVerifyTargetMessage(evt);\r\n            if (eventMessage) {\r\n                sendEventMessage({\r\n                    target: evt.target,\r\n                    message: eventMessage\r\n                });\r\n            }\r\n            updateState({ key: 'selectingType', value: null });\r\n        } else {\r\n            isMouseDown = true;\r\n            regionStart = { x: evt.clientX, y: evt.clientY };\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    function onSelectingMouseUp(evt) {\r\n        if (!selectingType || !isInRange(evt)) {\r\n            return;\r\n        }\r\n\r\n        if (Math.abs(regionStart.x - evt.clientX) > 2 && Math.abs(regionStart.y - evt.clientY) > 2) {\r\n            sendEventMessage({\r\n                message: {\r\n                    type: 'screenshot',\r\n                    left: Math.min(regionStart.x, evt.clientX) - 1,\r\n                    top: Math.min(regionStart.y, evt.clientY) - 1,\r\n                    width: Math.abs(regionStart.x - evt.clientX) + 2,\r\n                    height: Math.abs(regionStart.y - evt.clientY) + 2\r\n                }\r\n            });\r\n        }\r\n\r\n        isMouseDown = false;\r\n        regionStart = null;\r\n    }\r\n\r\n    function onSelectingClick(evt) {\r\n        if (!selectingType) {\r\n            return;\r\n        }\r\n\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n\r\n        hideSelectingOverlay();\r\n        selectingType = null;\r\n        updateState({ key: 'selectingType', value: null });\r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        var target = document.querySelector(cssPath);\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        var overLay = getSelectingOverlay();\r\n        var targetBox = target.getBoundingClientRect();\r\n        var position = getPosition(target);\r\n        var size = {\r\n            x: position.x,\r\n            y: position.y,\r\n            width: targetBox.width,\r\n            height: targetBox.height\r\n        };\r\n\r\n        overLay.style.border = '2px solid #FF5733';\r\n        overLay.style.top = size.y + 'px';\r\n        overLay.style.left = size.x + 'px';\r\n        overLay.style.width = size.width + 'px';\r\n        overLay.style.height = size.height + 'px';\r\n        overLay.style.display = 'block';\r\n\r\n        setTimeout(() => {\r\n            hideSelectingOverlay();\r\n            selectingType = null;\r\n            updateState({ key: 'selectingType', value: null });\r\n        }, 2000);\r\n    }\r\n\r\n    function hideSelectingOverlay() {\r\n        var overLay = getSelectingOverlay();\r\n        overLay.style.display = 'none';\r\n    }\r\n\r\n    function getSelectingOverlay() {\r\n        var el;\r\n\r\n        if (!selectTargetOverlay) {\r\n            el = window.document.createElement('div');\r\n            el.id = 'autom-select-target-overlay';\r\n            el.style.display = 'none';\r\n            el.style.position = 'absolute';\r\n            el.style.width = '100px';\r\n            el.style.border = '2px solid #FF5733';\r\n            el.style.height = '100px';\r\n            el.style.background = 'transparent';\r\n            el.style['pointer-events'] = 'none';\r\n            el.style['z-index'] = 100000;\r\n            el.style['box-sizing'] = 'content-box';\r\n            document.body.appendChild(el);\r\n            selectTargetOverlay = el;\r\n        }\r\n\r\n        return selectTargetOverlay;\r\n    }\r\n\r\n    function onEvent(evt) {\r\n        var eventMessage;\r\n\r\n        if (!recording || !eventCb || selectingType) {\r\n            return;\r\n        }\r\n\r\n        console.log(evt.type);\r\n        eventMessage = getEventMessage(evt);\r\n        if (eventMessage) {\r\n            sendEventMessage({\r\n                target: evt.target,\r\n                message: eventMessage\r\n            });\r\n        }\r\n    }\r\n\r\n    function sendEventMessage(eventMessage) {\r\n        eventCb(eventMessage.message);\r\n    }\r\n\r\n    function getVerifyTargetMessage(evt) {\r\n        return {\r\n            type: 'verify',\r\n            cssPath: window.automEvents.cssPathBuilder.build(evt.target),\r\n            value: evt.target.textContent\r\n        };\r\n    }\r\n\r\n    function getEventMessage(evt) {\r\n        var type = evt.type,\r\n            message = {\r\n                type: type,\r\n                cssPath: window.automEvents.cssPathBuilder.build(evt.target)\r\n            },\r\n            eventConfig = events[type];\r\n\r\n        if (eventConfig) {\r\n            if (eventConfig.condition && !eventConfig.condition(evt)) {\r\n                return;\r\n            }\r\n\r\n            eventConfig.props && eventConfig.props.forEach(function (prop) {\r\n                var isPropFunc = prop.name && prop.fn,\r\n                    propName = isPropFunc ? prop.name : prop,\r\n                    propValue = isPropFunc ? prop.fn(evt) : evt[prop];\r\n\r\n                if (propValue !== undefined) {\r\n                    message[propName] = propValue;\r\n                }\r\n            });\r\n        }\r\n\r\n        return message;\r\n    }\r\n       \r\n    function getPosition(el) {\r\n        var elPosition = el.getBoundingClientRect && el.getBoundingClientRect();\r\n\r\n        return !elPosition ? { x: 0, y: 0 } : {\r\n            x: elPosition.left + window.scrollX,\r\n            y: elPosition.top + window.scrollY,\r\n            width: elPosition.width,\r\n            height: elPosition.height\r\n        }\r\n    }\r\n\r\n    eventModule = {\r\n        events: events,\r\n        startListening: startListening,\r\n        toggleRecording: toggleRecording,\r\n        setSelectingType: setSelectingType,\r\n        highlightElement: highlightElement,\r\n        updateConfig: updateConfig,\r\n        setUpdateStateHandler: setUpdateStateHandler\r\n    }\r\n\r\n    window.automEvents = Object.assign(window.automEvents || {}, eventModule);\r\n})();","(function () {\r\n    var state = {\r\n        recording: false\r\n    },\r\n        actions = {\r\n            start: startAction,\r\n            stop: stopAction,\r\n            selecttarget: selectTargetAction,\r\n            highlight: highlightElement,\r\n            updateconfig: updateConfig,\r\n            updatestate: updateState,\r\n            screenshot: screenshot\r\n        },\r\n        channel;\r\n\r\n    chrome.runtime.onMessage.addListener(\r\n        function (request, sender, sendResponse) {\r\n            var action = actions[request.action],\r\n                success = false;\r\n\r\n            if (action) {\r\n                action(request.value);\r\n                success = true;\r\n            }\r\n            sendResponse({ success: true });\r\n        });\r\n\r\n    function startAction() {\r\n        window.location.reload();\r\n    }\r\n\r\n    function stopAction() {\r\n        state.recording = false;\r\n        window.automEvents.toggleRecording(state.recording);\r\n        closeChannel();\r\n    }\r\n\r\n    function updateState(config) {\r\n        state[config.key] = config.value;\r\n        if (config.key === 'isPartialScreenshot' && !config.value && state.selectingType === 'region') {\r\n            screenshot();\r\n        }\r\n    }\r\n\r\n    function screenshot() {\r\n        state.selectingType = state.isPartialScreenshot && state.selectingType !== 'region' ? 'region' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function selectTargetAction() {\r\n        state.selectingType = state.selectingType !== 'target' ? 'target' : null;\r\n        window.automEvents.setSelectingType(state.selectingType);\r\n    }\r\n\r\n    function highlightElement(cssPath) {\r\n        window.automEvents.highlightElement(cssPath);\r\n    }\r\n\r\n    function updateConfig(config) {\r\n        window.automEvents.updateConfig(config);\r\n    }\r\n\r\n    function start() {\r\n        window.automEvents.startListening(eventCallBack);\r\n        window.automEvents.setUpdateStateHandler(updateState);\r\n        window.addEventListener('unload', onUnLoad);\r\n\r\n        chrome.runtime.sendMessage({ action: 'isRecording' }, function (response) {\r\n            state.recording = response && response.isRecording;\r\n            if (state.recording) {\r\n                window.automEvents.toggleRecording(state.recording);\r\n                createChannel();\r\n\r\n                if (window.self === window.top) {\r\n                    sendMessage({\r\n                        notify: 'load'\r\n                    });\r\n                    sendMessage({\r\n                        type: 'setsize',\r\n                        width: window.innerWidth,\r\n                        height: window.innerHeight\r\n                    });\r\n                    sendMessage({\r\n                        type: 'url',\r\n                        value: window.location.href\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function onUnLoad() {\r\n        if (!state.recording) {\r\n            return true;\r\n        }\r\n\r\n        channel.postMessage({ stopRecording: true });\r\n    }\r\n\r\n    function createChannel() {\r\n        channel = chrome.runtime.connect({ name: \"automrecoder\" });\r\n\r\n        channel.onMessage.addListener(handlChannelMessage);\r\n    }\r\n\r\n    function handlChannelMessage(message) {\r\n\r\n    }\r\n\r\n    function closeChannel() {\r\n        channel.disconnect();\r\n    }\r\n\r\n    function eventCallBack(eventMessage) {\r\n        sendMessage(eventMessage);\r\n    }\r\n\r\n    function sendMessage(message) {\r\n        if (!state.recording) {\r\n            return;\r\n        }\r\n\r\n        channel.postMessage(message);\r\n    }\r\n\r\n    start();\r\n})()"],"sourceRoot":""}