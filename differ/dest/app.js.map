{"version":3,"sources":["webpack:///webpack/bootstrap ad34f69880a59781a8d2?ada7","webpack:///./app/app.js"],"names":["start","getDiffInfo","initHtml","previewer","document","getElementById","addEventListener","style","display","config","method","headers","request","Request","fetch","then","response","json","diffes","length","alert","createDiffList","app","frag","createDocumentFragment","list","createElement","listBody","classList","add","forEach","diff","tr","title","titleTd","titleTr","acceptButton","createAcceptButton","innerHTML","titleSegs","join","appendChild","createImageTd","base","current","src","td","img","Image","previewerImg","button","type","value","doPostReplace","file","body","JSON","stringify"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 122);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ad34f69880a59781a8d2","(function () {\r\n    start();\r\n\r\n    function start() {\r\n        getDiffInfo();\r\n        initHtml();\r\n    }\r\n\r\n    function initHtml() {\r\n        var previewer = document.getElementById('previewer');\r\n        previewer.addEventListener('click', function () {\r\n            previewer.style.display = 'none';\r\n        });\r\n    }\r\n\r\n    function getDiffInfo() {\r\n        var config = { \r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n            };\r\n\r\n        var request = new Request('diffInfo');\r\n\r\n        fetch(request, config).then(function(response) {\r\n            response.json().then(function (diffes) {\r\n                if (!diffes.length) {\r\n                    alert('There is no diffs to show');\r\n                }\r\n\r\n                createDiffList(diffes);\r\n            });\r\n        });\r\n    }\r\n\r\n    function createDiffList(diffes) {\r\n        var app = document.getElementById('app'),\r\n            frag = document.createDocumentFragment(),\r\n            list = document.createElement('table'),\r\n            listBody = document.createElement('tbody');\r\n\r\n        list.classList.add('i-diff-list');\r\n        diffes.forEach(function (diff) {\r\n            var tr = document.createElement('tr'),\r\n                title = document.createElement('div'),\r\n                titleTd = document.createElement('td'),\r\n                titleTr = document.createElement('tr'),\r\n                acceptButton = createAcceptButton(diff);\r\n\r\n            title.classList.add('i-row-title');\r\n            title.innerHTML = diff.titleSegs.join(' > ');\r\n            titleTd.appendChild(title);\r\n            titleTr.appendChild(titleTd);\r\n\r\n            tr.appendChild(createImageTd(diff.base));\r\n            tr.appendChild(createImageTd(diff.current));\r\n            tr.appendChild(createImageTd(diff.diff));\r\n            tr.appendChild(acceptButton);\r\n\r\n            listBody.appendChild(titleTr);\r\n            listBody.appendChild(tr);\r\n        });\r\n\r\n        list.appendChild(listBody);\r\n        frag.appendChild(list);\r\n        app.innerHTML = '';\r\n        app.appendChild(frag);\r\n    }\r\n\r\n    function createImageTd(src) {\r\n        var td = document.createElement('td'),\r\n            img = new Image();\r\n\r\n        img.src = src;\r\n        td.appendChild(img);\r\n        \r\n        img.addEventListener('click', function () {\r\n            var previewerImg = document.getElementById('previewerImg');\r\n            previewerImg.src = src;\r\n            document.getElementById('previewer').style.display = 'block';\r\n        });\r\n        return td;\r\n    }\r\n\r\n    function createAcceptButton(diff) {\r\n        var td = document.createElement('td'),\r\n            button = document.createElement('input');\r\n\r\n        button.classList.add('i-accept-btn');\r\n        button.type = 'button';\r\n        button.value = 'Accept';\r\n\r\n        button.addEventListener('click', function () {\r\n            doPostReplace(diff.file);\r\n        });\r\n        td.appendChild(button);\r\n        return td;\r\n    }\r\n\r\n    function doPostReplace(file) {\r\n        var config = { \r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    file: file\r\n                })\r\n            };\r\n\r\n        var request = new Request('acceptDiff');\r\n\r\n        fetch(request, config).then(function(response) {\r\n            getDiffInfo();\r\n        });\r\n    }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./app/app.js"],"sourceRoot":""}